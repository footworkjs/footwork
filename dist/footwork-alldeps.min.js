/**
 * footwork.js - A solid base for structured knockout applications.
 * Author: Jonathan Newman (http://staticty.pe)
 * Version: v0.1.0
 * Url: http://footworkjs.com
 * License(s): MIT
 */
(function(n,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():n.ko=e()})(this,function(){var n=function(){"use strict";var n,e,t,r,i={},o=function(n,e){"[object Array]"!==Object.prototype.toString.call(n)&&(n=n.split(" "));for(var t=0;t<n.length;t++)e(n[t],t)};return document.documentElement.classList?(n=function(n,e){return n.classList.contains(e)},e=function(n,e){n.classList.add(e)},t=function(n,e){n.classList.remove(e)},r=function(n,e){n.classList.toggle(e)}):(n=function(n,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(n.className)},e=function(n,e){i.hasClass(n,e)||(n.className+=(n.className?" ":"")+e)},t=function(n,e){i.hasClass(n,e)&&(n.className=n.className.replace(new RegExp("(^|\\s)*"+e+"(\\s|$)*","g"),""))},r=function(n,e){var t=i.hasClass(n,e)?i.removeClass:i.addClass;t(n,e)}),i.hasClass=function(e,t){return n(e,t)},i.addClass=function(n,t){o(t,function(t){e(n,t)})},i.removeClass=function(n,e){o(e,function(e){t(n,e)})},i.toggleClass=function(n,e){o(e,function(e){r(n,e)})},i}();(function(){(function(n){var e=this||(0,eval)("this"),t=e.document,r=e.navigator,i=e.jQuery,o=e.JSON;(function(n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.ko={})})(function(a){function u(n,e){return null===n||typeof n in p?n===e:!1}function c(e,t){var r;return function(){r||(r=setTimeout(function(){r=n,e()},t))}}function s(n,e){var t;return function(){clearTimeout(t),t=setTimeout(n,e)}}function f(n,e,t,r){l.d[n]={init:function(n,i,o,a,u){var c,s;return l.ba(function(){var o=l.a.c(i()),a=!t!=!o,f=!s;(f||e||a!==c)&&(f&&l.ca.fa()&&(s=l.a.lb(l.e.childNodes(n),!0)),a?(f||l.e.U(n,l.a.lb(s)),l.gb(r?r(u,o):u,n)):l.e.da(n),c=a)},null,{G:n}),{controlsDescendantBindings:!0}}},l.g.aa[n]=!1,l.e.Q[n]=!0}var l="undefined"!=typeof a?a:{};l.b=function(n,e){for(var t=n.split("."),r=l,i=0;i<t.length-1;i++)r=r[t[i]];r[t[t.length-1]]=e},l.s=function(n,e,t){n[e]=t},l.version="3.1.0",l.b("version",l.version),l.a=function(){function a(n,e){for(var t in n)n.hasOwnProperty(t)&&e(t,n[t])}function u(n,e){if(e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function c(n,e){return n.__proto__=e,n}var s={__proto__:[]}instanceof Array,f={},p={};f[r&&/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(f,function(n,e){if(e.length)for(var t=0,r=e.length;r>t;t++)p[e[t]]=n});var h={propertychange:!0},d=t&&function(){for(var e=3,r=t.createElement("div"),i=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0];);return e>4?e:n}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(n,e){for(var t=0,r=n.length;r>t;t++)e(n[t],t)},l:function(n,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(n,e);for(var t=0,r=n.length;r>t;t++)if(n[t]===e)return t;return-1},hb:function(n,e,t){for(var r=0,i=n.length;i>r;r++)if(e.call(t,n[r],r))return n[r];return null},ma:function(n,e){var t=l.a.l(n,e);t>0?n.splice(t,1):0===t&&n.shift()},ib:function(n){n=n||[];for(var e=[],t=0,r=n.length;r>t;t++)0>l.a.l(e,n[t])&&e.push(n[t]);return e},ya:function(n,e){n=n||[];for(var t=[],r=0,i=n.length;i>r;r++)t.push(e(n[r],r));return t},la:function(n,e){n=n||[];for(var t=[],r=0,i=n.length;i>r;r++)e(n[r],r)&&t.push(n[r]);return t},$:function(n,e){if(e instanceof Array)n.push.apply(n,e);else for(var t=0,r=e.length;r>t;t++)n.push(e[t]);return n},Y:function(n,e,t){var r=l.a.l(l.a.Sa(n),e);0>r?t&&n.push(e):t||n.splice(r,1)},na:s,extend:u,ra:c,sa:s?c:u,A:a,Oa:function(n,e){if(!n)return n;var t,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=e(n[t],t,n));return r},Fa:function(n){for(;n.firstChild;)l.removeNode(n.firstChild)},ec:function(n){n=l.a.R(n);for(var e=t.createElement("div"),r=0,i=n.length;i>r;r++)e.appendChild(l.M(n[r]));return e},lb:function(n,e){for(var t=0,r=n.length,i=[];r>t;t++){var o=n[t].cloneNode(!0);i.push(e?l.M(o):o)}return i},U:function(n,e){if(l.a.Fa(n),e)for(var t=0,r=e.length;r>t;t++)n.appendChild(e[t])},Bb:function(n,e){var t=n.nodeType?[n]:n;if(0<t.length){for(var r=t[0],i=r.parentNode,o=0,a=e.length;a>o;o++)i.insertBefore(e[o],r);for(o=0,a=t.length;a>o;o++)l.removeNode(t[o])}},ea:function(n,e){if(n.length){for(e=8===e.nodeType&&e.parentNode||e;n.length&&n[0].parentNode!==e;)n.shift();if(1<n.length){var t=n[0],r=n[n.length-1];for(n.length=0;t!==r;)if(n.push(t),t=t.nextSibling,!t)return;n.push(r)}}return n},Db:function(n,e){7>d?n.setAttribute("selected",e):n.selected=e},ta:function(e){return null===e||e===n?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(n,e){for(var t=[],r=(n||"").split(e),i=0,o=r.length;o>i;i++){var a=l.a.ta(r[i]);""!==a&&t.push(a)}return t},kc:function(n,e){return n=n||"",e.length>n.length?!1:n.substring(0,e.length)===e},Sb:function(n,e){if(n===e)return!0;if(11===n.nodeType)return!1;if(e.contains)return e.contains(3===n.nodeType?n.parentNode:n);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(n));for(;n&&n!=e;)n=n.parentNode;return!!n},Ea:function(n){return l.a.Sb(n,n.ownerDocument.documentElement)},eb:function(n){return!!l.a.hb(n,l.a.Ea)},B:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},q:function(n,e,t){var r=d&&h[e];if(!r&&i)i(n).bind(e,t);else if(r||"function"!=typeof n.addEventListener){if("undefined"==typeof n.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var o=function(e){t.call(n,e)},a="on"+e;n.attachEvent(a,o),l.a.u.ja(n,function(){n.detachEvent(a,o)})}else n.addEventListener(e,t,!1)},ha:function(n,r){if(!n||!n.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var o;if("input"===l.a.B(n)&&n.type&&"click"==r.toLowerCase()?(o=n.type,o="checkbox"==o||"radio"==o):o=!1,i&&!o)i(n).trigger(r);else if("function"==typeof t.createEvent){if("function"!=typeof n.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");o=t.createEvent(p[r]||"HTMLEvents"),o.initEvent(r,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(o)}else if(o&&n.click)n.click();else{if("undefined"==typeof n.fireEvent)throw Error("Browser doesn't support triggering events");n.fireEvent("on"+r)}},c:function(n){return l.v(n)?n():n},Sa:function(n){return l.v(n)?n.o():n},ua:function(n,e,t){if(e){var r=/\S+/g,i=n.className.match(r)||[];l.a.r(e.match(r),function(n){l.a.Y(i,n,t)}),n.className=i.join(" ")}},Xa:function(e,t){var r=l.a.c(t);(null===r||r===n)&&(r="");var i=l.e.firstChild(e);!i||3!=i.nodeType||l.e.nextSibling(i)?l.e.U(e,[e.ownerDocument.createTextNode(r)]):i.data=r,l.a.Vb(e)},Cb:function(n,e){if(n.name=e,7>=d)try{n.mergeAttributes(t.createElement("<input name='"+n.name+"'/>"),!1)}catch(r){}},Vb:function(n){d>=9&&(n=1==n.nodeType?n:n.parentNode,n.style&&(n.style.zoom=n.style.zoom))},Tb:function(n){if(d){var e=n.style.width;n.style.width=0,n.style.width=e}},ic:function(n,e){n=l.a.c(n),e=l.a.c(e);for(var t=[],r=n;e>=r;r++)t.push(r);return t},R:function(n){for(var e=[],t=0,r=n.length;r>t;t++)e.push(n[t]);return e},mc:6===d,nc:7===d,oa:d,ob:function(n,e){for(var t=l.a.R(n.getElementsByTagName("input")).concat(l.a.R(n.getElementsByTagName("textarea"))),r="string"==typeof e?function(n){return n.name===e}:function(n){return e.test(n.name)},i=[],o=t.length-1;o>=0;o--)r(t[o])&&i.push(t[o]);return i},fc:function(n){return"string"==typeof n&&(n=l.a.ta(n))?o&&o.parse?o.parse(n):new Function("return "+n)():null},Ya:function(n,e,t){if(!o||!o.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return o.stringify(l.a.c(n),e,t)},gc:function(n,e,r){r=r||{};var i=r.params||{},o=r.includeFields||this.mb,u=n;if("object"==typeof n&&"form"===l.a.B(n))for(var u=n.action,c=o.length-1;c>=0;c--)for(var s=l.a.ob(n,o[c]),f=s.length-1;f>=0;f--)i[s[f].name]=s[f].value;e=l.a.c(e);var p=t.createElement("form");p.style.display="none",p.action=u,p.method="post";for(var h in e)n=t.createElement("input"),n.name=h,n.value=l.a.Ya(l.a.c(e[h])),p.appendChild(n);a(i,function(n,e){var r=t.createElement("input");r.name=n,r.value=e,p.appendChild(r)}),t.body.appendChild(p),r.submitter?r.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),l.b("utils",l.a),l.b("utils.arrayForEach",l.a.r),l.b("utils.arrayFirst",l.a.hb),l.b("utils.arrayFilter",l.a.la),l.b("utils.arrayGetDistinctValues",l.a.ib),l.b("utils.arrayIndexOf",l.a.l),l.b("utils.arrayMap",l.a.ya),l.b("utils.arrayPushAll",l.a.$),l.b("utils.arrayRemoveItem",l.a.ma),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.mb),l.b("utils.getFormFields",l.a.ob),l.b("utils.peekObservable",l.a.Sa),l.b("utils.postJson",l.a.gc),l.b("utils.parseJson",l.a.fc),l.b("utils.registerEventHandler",l.a.q),l.b("utils.stringifyJson",l.a.Ya),l.b("utils.range",l.a.ic),l.b("utils.toggleDomNodeCssClass",l.a.ua),l.b("utils.triggerEvent",l.a.ha),l.b("utils.unwrapObservable",l.a.c),l.b("utils.objectForEach",l.a.A),l.b("utils.addOrRemoveItem",l.a.Y),l.b("unwrap",l.a.c),Function.prototype.bind||(Function.prototype.bind=function(n){var e=this,t=Array.prototype.slice.call(arguments);return n=t.shift(),function(){return e.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){function e(e,o){var a=e[r];if(!a||"null"===a||!i[a]){if(!o)return n;a=e[r]="ko"+t++,i[a]={}}return i[a]}var t=0,r="__ko__"+(new Date).getTime(),i={};return{get:function(t,r){var i=e(t,!1);return i===n?n:i[r]},set:function(t,r,i){(i!==n||e(t,!1)!==n)&&(e(t,!0)[r]=i)},clear:function(n){var e=n[r];return e?(delete i[e],n[r]=null,!0):!1},L:function(){return t++ +r}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.u=new function(){function e(e,t){var i=l.a.f.get(e,r);return i===n&&t&&(i=[],l.a.f.set(e,r,i)),i}function t(n){var r=e(n,!1);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](n);if(l.a.f.clear(n),l.a.u.cleanExternalData(n),a[n.nodeType])for(r=n.firstChild;n=r;)r=n.nextSibling,8===n.nodeType&&t(n)}var r=l.a.f.L(),o={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{ja:function(n,t){if("function"!=typeof t)throw Error("Callback must be a function");e(n,!0).push(t)},Ab:function(t,i){var o=e(t,!1);o&&(l.a.ma(o,i),0==o.length&&l.a.f.set(t,r,n))},M:function(n){if(o[n.nodeType]&&(t(n),a[n.nodeType])){var e=[];l.a.$(e,n.getElementsByTagName("*"));for(var r=0,i=e.length;i>r;r++)t(e[r])}return n},removeNode:function(n){l.M(n),n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){i&&"function"==typeof i.cleanData&&i.cleanData([n])}}},l.M=l.a.u.M,l.removeNode=l.a.u.removeNode,l.b("cleanNode",l.M),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.u),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.u.ja),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.u.Ab),function(){l.a.Qa=function(n){var r;if(i){if(i.parseHTML)r=i.parseHTML(n)||[];else if((r=i.clean([n]))&&r[0]){for(n=r[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}}else{var o=l.a.ta(n).toLowerCase();for(r=t.createElement("div"),o=o.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!o.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!o.indexOf("<td")||!o.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],n="ignored<div>"+o[1]+n+o[2]+"</div>","function"==typeof e.innerShiv?r.appendChild(e.innerShiv(n)):r.innerHTML=n;o[0]--;)r=r.lastChild;r=l.a.R(r.lastChild.childNodes)}return r},l.a.Va=function(e,t){if(l.a.Fa(e),t=l.a.c(t),null!==t&&t!==n)if("string"!=typeof t&&(t=t.toString()),i)i(e).html(t);else for(var r=l.a.Qa(t),o=0;o<r.length;o++)e.appendChild(r[o])}}(),l.b("utils.parseHtmlFragment",l.a.Qa),l.b("utils.setHtml",l.a.Va),l.w=function(){function e(n,t){if(n)if(8==n.nodeType){var r=l.w.xb(n.nodeValue);null!=r&&t.push({Rb:n,cc:r})}else if(1==n.nodeType)for(var r=0,i=n.childNodes,o=i.length;o>r;r++)e(i[r],t)}var t={};return{Na:function(n){if("function"!=typeof n)throw Error("You can only pass a function to ko.memoization.memoize()");var e=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[e]=n,"<!--[ko_memo:"+e+"]-->"},Hb:function(e,r){var i=t[e];if(i===n)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return i.apply(null,r||[]),!0}finally{delete t[e]}},Ib:function(n,t){var r=[];e(n,r);for(var i=0,o=r.length;o>i;i++){var a=r[i].Rb,u=[a];t&&l.a.$(u,t),l.w.Hb(r[i].cc,u),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},xb:function(n){return(n=n.match(/^\[ko_memo\:(.*?)\]$/))?n[1]:null}}}(),l.b("memoization",l.w),l.b("memoization.memoize",l.w.Na),l.b("memoization.unmemoize",l.w.Hb),l.b("memoization.parseMemoText",l.w.xb),l.b("memoization.unmemoizeDomNodeAndDescendants",l.w.Ib),l.Ga={throttle:function(n,e){n.throttleEvaluation=e;var t=null;return l.h({read:n,write:function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}})},rateLimit:function(n,e){var t,r,i;"number"==typeof e?t=e:(t=e.timeout,r=e.method),i="notifyWhenChangesStop"==r?s:c,n.Ma(function(n){return i(n,t)})},notify:function(n,e){n.equalityComparer="always"==e?null:u}};var p={undefined:1,"boolean":1,number:1,string:1};l.b("extenders",l.Ga),l.Fb=function(n,e,t){this.target=n,this.za=e,this.Qb=t,this.sb=!1,l.s(this,"dispose",this.F)},l.Fb.prototype.F=function(){this.sb=!0,this.Qb()},l.N=function(){l.a.sa(this,l.N.fn),this.H={}};var h="change";a={V:function(n,e,t){var r=this;t=t||h;var i=new l.Fb(r,e?n.bind(e):n,function(){l.a.ma(r.H[t],i)});return r.o&&r.o(),r.H[t]||(r.H[t]=[]),r.H[t].push(i),i},notifySubscribers:function(n,e){if(e=e||h,this.qb(e))try{l.k.jb();for(var t,r=this.H[e].slice(0),i=0;t=r[i];++i)t.sb||t.za(n)}finally{l.k.end()}},Ma:function(n){var e,t,r,i=this,o=l.v(i);i.ia||(i.ia=i.notifySubscribers,i.notifySubscribers=function(n,e){e&&e!==h?"beforeChange"===e?i.bb(n):i.ia(n,e):i.cb(n)});var a=n(function(){o&&r===i&&(r=i()),e=!1,i.Ka(t,r)&&i.ia(t=r)});i.cb=function(n){e=!0,r=n,a()},i.bb=function(n){e||(t=n,i.ia(n,"beforeChange"))}},qb:function(n){return this.H[n]&&this.H[n].length},Wb:function(){var n=0;return l.a.A(this.H,function(e,t){n+=t.length}),n},Ka:function(n,e){return!this.equalityComparer||!this.equalityComparer(n,e)},extend:function(n){var e=this;return n&&l.a.A(n,function(n,t){var r=l.Ga[n];"function"==typeof r&&(e=r(e,t)||e)}),e}},l.s(a,"subscribe",a.V),l.s(a,"extend",a.extend),l.s(a,"getSubscriptionsCount",a.Wb),l.a.na&&l.a.ra(a,Function.prototype),l.N.fn=a,l.tb=function(n){return null!=n&&"function"==typeof n.V&&"function"==typeof n.notifySubscribers},l.b("subscribable",l.N),l.b("isSubscribable",l.tb),l.ca=l.k=function(){function n(n){r.push(t),t=n}function e(){t=r.pop()}var t,r=[],i=0;return{jb:n,end:e,zb:function(n){if(t){if(!l.tb(n))throw Error("Only subscribable things can act as dependencies");t.za(n,n.Kb||(n.Kb=++i))}},t:function(t,r,i){try{return n(),t.apply(r,i||[])}finally{e()}},fa:function(){return t?t.ba.fa():void 0},pa:function(){return t?t.pa:void 0}}}(),l.b("computedContext",l.ca),l.b("computedContext.getDependenciesCount",l.ca.fa),l.b("computedContext.isInitial",l.ca.pa),l.m=function(n){function e(){return 0<arguments.length?(e.Ka(t,arguments[0])&&(e.P(),t=arguments[0],e.O()),this):(l.k.zb(e),t)}var t=n;return l.N.call(e),l.a.sa(e,l.m.fn),e.o=function(){return t},e.O=function(){e.notifySubscribers(t)},e.P=function(){e.notifySubscribers(t,"beforeChange")},l.s(e,"peek",e.o),l.s(e,"valueHasMutated",e.O),l.s(e,"valueWillMutate",e.P),e},l.m.fn={equalityComparer:u};var d=l.m.hc="__ko_proto__";l.m.fn[d]=l.m,l.a.na&&l.a.ra(l.m.fn,l.N.fn),l.Ha=function(e,t){return null===e||e===n||e[d]===n?!1:e[d]===t?!0:l.Ha(e[d],t)},l.v=function(n){return l.Ha(n,l.m)},l.ub=function(n){return"function"==typeof n&&n[d]===l.m||"function"==typeof n&&n[d]===l.h&&n.Yb?!0:!1},l.b("observable",l.m),l.b("isObservable",l.v),l.b("isWriteableObservable",l.ub),l.T=function(n){if(n=n||[],"object"!=typeof n||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=l.m(n),l.a.sa(n,l.T.fn),n.extend({trackArrayChanges:!0})},l.T.fn={remove:function(n){for(var e=this.o(),t=[],r="function"!=typeof n||l.v(n)?function(e){return e===n}:n,i=0;i<e.length;i++){var o=e[i];r(o)&&(0===t.length&&this.P(),t.push(o),e.splice(i,1),i--)}return t.length&&this.O(),t},removeAll:function(e){if(e===n){var t=this.o(),r=t.slice(0);return this.P(),t.splice(0,t.length),this.O(),r}return e?this.remove(function(n){return 0<=l.a.l(e,n)}):[]},destroy:function(n){var e=this.o(),t="function"!=typeof n||l.v(n)?function(e){return e===n}:n;this.P();for(var r=e.length-1;r>=0;r--)t(e[r])&&(e[r]._destroy=!0);this.O()},destroyAll:function(e){return e===n?this.destroy(function(){return!0}):e?this.destroy(function(n){return 0<=l.a.l(e,n)}):[]},indexOf:function(n){var e=this();return l.a.l(e,n)},replace:function(n,e){var t=this.indexOf(n);t>=0&&(this.P(),this.o()[t]=e,this.O())}},l.a.r("pop push reverse shift sort splice unshift".split(" "),function(n){l.T.fn[n]=function(){var e=this.o();return this.P(),this.kb(e,n,arguments),e=e[n].apply(e,arguments),this.O(),e}}),l.a.r(["slice"],function(n){l.T.fn[n]=function(){var e=this();return e[n].apply(e,arguments)}}),l.a.na&&l.a.ra(l.T.fn,l.m.fn),l.b("observableArray",l.T);var g="arrayChange";l.Ga.trackArrayChanges=function(n){function e(){if(!t){t=!0;var e=n.notifySubscribers;n.notifySubscribers=function(n,t){return t&&t!==h||++i,e.apply(this,arguments)};var o=[].concat(n.o()||[]);r=null,n.V(function(e){if(e=[].concat(e||[]),n.qb(g)){var t;(!r||i>1)&&(r=l.a.Aa(o,e,{sparse:!0})),t=r,t.length&&n.notifySubscribers(t,g)}o=e,r=null,i=0})}}if(!n.kb){var t=!1,r=null,i=0,o=n.V;n.V=n.subscribe=function(n,t,r){return r===g&&e(),o.apply(this,arguments)},n.kb=function(n,e,o){function a(n,e,t){return u[u.length]={status:n,value:e,index:t}}if(t&&!i){var u=[],c=n.length,s=o.length,f=0;switch(e){case"push":f=c;case"unshift":for(e=0;s>e;e++)a("added",o[e],f+e);break;case"pop":f=c-1;case"shift":c&&a("deleted",n[f],f);break;case"splice":e=Math.min(Math.max(0,0>o[0]?c+o[0]:o[0]),c);for(var c=1===s?c:Math.min(e+(o[1]||0),c),s=e+s-2,f=Math.max(c,s),p=[],h=[],d=2;f>e;++e,++d)c>e&&h.push(a("deleted",n[e],e)),s>e&&p.push(a("added",o[d],e));l.a.nb(h,p);break;default:return}r=u}}}},l.ba=l.h=function(n,e,t){function r(){h=!0,l.a.A(w,function(n,e){e.F()}),w={},_=0,s=!1}function i(){var n=a.throttleEvaluation;n&&n>=0?(clearTimeout(x),x=setTimeout(o,n)):a.wa?a.wa():o()}function o(){if(!f&&!h){if(m&&m()){if(!p)return void y()}else p=!1;f=!0;try{var n=w,t=_;l.k.jb({za:function(e,r){h||(t&&n[r]?(w[r]=n[r],++_,delete n[r],--t):w[r]||(w[r]=e.V(i),++_))},ba:a,pa:!_}),w={},_=0;try{var r=e?d.call(e):d()}finally{l.k.end(),t&&l.a.A(n,function(n,e){e.F()}),s=!1}a.Ka(c,r)&&(a.notifySubscribers(c,"beforeChange"),c=r,a.wa&&!a.throttleEvaluation||a.notifySubscribers(c))}finally{f=!1}_||y()}}function a(){if(0<arguments.length){if("function"!=typeof g)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return g.apply(e,arguments),this}return s&&o(),l.k.zb(a),c}function u(){return s||_>0}var c,s=!0,f=!1,p=!1,h=!1,d=n;if(d&&"object"==typeof d?(t=d,d=t.read):(t=t||{},d||(d=t.read)),"function"!=typeof d)throw Error("Pass a function that returns the value of the ko.computed");var g=t.write,b=t.disposeWhenNodeIsRemoved||t.G||null,v=t.disposeWhen||t.Da,m=v,y=r,w={},_=0,x=null;e||(e=t.owner),l.N.call(a),l.a.sa(a,l.h.fn),a.o=function(){return s&&!_&&o(),c},a.fa=function(){return _},a.Yb="function"==typeof t.write,a.F=function(){y()},a.ga=u;var k=a.Ma;return a.Ma=function(n){k.call(a,n),a.wa=function(){a.bb(c),s=!0,a.cb(a)}},l.s(a,"peek",a.o),l.s(a,"dispose",a.F),l.s(a,"isActive",a.ga),l.s(a,"getDependenciesCount",a.fa),b&&(p=!0,b.nodeType&&(m=function(){return!l.a.Ea(b)||v&&v()})),!0!==t.deferEvaluation&&o(),b&&u()&&b.nodeType&&(y=function(){l.a.u.Ab(b,y),r()},l.a.u.ja(b,y)),a},l.$b=function(n){return l.Ha(n,l.h)},a=l.m.hc,l.h[a]=l.m,l.h.fn={equalityComparer:u},l.h.fn[a]=l.h,l.a.na&&l.a.ra(l.h.fn,l.N.fn),l.b("dependentObservable",l.h),l.b("computed",l.h),l.b("isComputed",l.$b),function(){function e(i,o,a){if(a=a||new r,i=o(i),"object"!=typeof i||null===i||i===n||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var u=i instanceof Array?[]:{};return a.save(i,u),t(i,function(t){var r=o(i[t]);switch(typeof r){case"boolean":case"number":case"string":case"function":u[t]=r;break;case"object":case"undefined":var c=a.get(r);u[t]=c!==n?c:e(r,o,a)}}),u}function t(n,e){if(n instanceof Array){for(var t=0;t<n.length;t++)e(t);"function"==typeof n.toJSON&&e("toJSON")}else for(t in n)e(t)}function r(){this.keys=[],this.ab=[]}l.Gb=function(n){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(n,function(n){for(var e=0;l.v(n)&&10>e;e++)n=n();return n})},l.toJSON=function(n,e,t){return n=l.Gb(n),l.a.Ya(n,e,t)},r.prototype={save:function(n,e){var t=l.a.l(this.keys,n);t>=0?this.ab[t]=e:(this.keys.push(n),this.ab.push(e))},get:function(e){return e=l.a.l(this.keys,e),e>=0?this.ab[e]:n}}}(),l.b("toJS",l.Gb),l.b("toJSON",l.toJSON),function(){l.i={p:function(e){switch(l.a.B(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?l.a.f.get(e,l.d.options.Pa):7>=l.a.oa?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?l.i.p(e.options[e.selectedIndex]):n;default:return e.value}},X:function(e,t,r){switch(l.a.B(e)){case"option":switch(typeof t){case"string":l.a.f.set(e,l.d.options.Pa,n),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:l.a.f.set(e,l.d.options.Pa,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":(""===t||null===t)&&(t=n);for(var i,o=-1,a=0,u=e.options.length;u>a;++a)if(i=l.i.p(e.options[a]),i==t||""==i&&t===n){o=a;break}(r||o>=0||t===n&&1<e.size)&&(e.selectedIndex=o);break;default:(null===t||t===n)&&(t=""),e.value=t}}}}(),l.b("selectExtensions",l.i),l.b("selectExtensions.readValue",l.i.p),l.b("selectExtensions.writeValue",l.i.X),l.g=function(){function n(n){n=l.a.ta(n),123===n.charCodeAt(0)&&(n=n.slice(1,-1));var e,t,a=[],u=n.match(r),c=0;if(u){u.push(",");for(var s,f=0;s=u[f];++f){var p=s.charCodeAt(0);if(44===p){if(0>=c){e&&a.push(t?{key:e,value:t.join("")}:{unknown:e}),e=t=c=0;continue}}else if(58===p){if(!t)continue}else if(47===p&&f&&1<s.length)(p=u[f-1].match(i))&&!o[p[0]]&&(n=n.substr(n.indexOf(s)+1),u=n.match(r),u.push(","),f=-1,s="/");else if(40===p||123===p||91===p)++c;else if(41===p||125===p||93===p)--c;else if(!e&&!t){e=34===p||39===p?s.slice(1,-1):s;continue}t?t.push(s):t=[s]}}return a}var e=["true","false","null","undefined"],t=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,o={"in":1,"return":1,"typeof":1},a={};return{aa:[],W:a,Ra:n,qa:function(r,i){function o(n,r){var i,f=l.getBindingHandler(n);(f&&f.preprocess?r=f.preprocess(r,n,o):1)&&((f=a[n])&&(i=r,0<=l.a.l(e,i)?i=!1:(f=i.match(t),i=null===f?!1:f[1]?"Object("+f[1]+")"+f[2]:i),f=i),f&&c.push("'"+n+"':function(_z){"+i+"=_z}"),s&&(r="function(){return "+r+" }"),u.push("'"+n+"':"+r))}i=i||{};var u=[],c=[],s=i.valueAccessors,f="string"==typeof r?n(r):r;return l.a.r(f,function(n){o(n.key||n.unknown,n.value)}),c.length&&o("_ko_property_writers","{"+c.join(",")+" }"),u.join(",")},bc:function(n,e){for(var t=0;t<n.length;t++)if(n[t].key==e)return!0;return!1},va:function(n,e,t,r,i){n&&l.v(n)?!l.ub(n)||i&&n.o()===r||n(r):(n=e.get("_ko_property_writers"))&&n[t]&&n[t](r)}}}(),l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.aa),l.b("expressionRewriting.parseObjectLiteral",l.g.Ra),l.b("expressionRewriting.preProcessBindings",l.g.qa),l.b("expressionRewriting._twoWayBindings",l.g.W),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.qa),function(){function n(n){return 8==n.nodeType&&a.test(o?n.text:n.nodeValue)}function e(n){return 8==n.nodeType&&u.test(o?n.text:n.nodeValue)}function r(t,r){for(var i=t,o=1,a=[];i=i.nextSibling;){if(e(i)&&(o--,0===o))return a;a.push(i),n(i)&&o++}if(!r)throw Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function i(n,e){var t=r(n,e);return t?0<t.length?t[t.length-1].nextSibling:n.nextSibling:null}var o=t&&"<!--test-->"===t.createComment("test").text,a=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,c={ul:!0,ol:!0};l.e={Q:{},childNodes:function(e){return n(e)?r(e):e.childNodes},da:function(e){if(n(e)){e=l.e.childNodes(e);for(var t=0,r=e.length;r>t;t++)l.removeNode(e[t])}else l.a.Fa(e)},U:function(e,t){if(n(e)){l.e.da(e);for(var r=e.nextSibling,i=0,o=t.length;o>i;i++)r.parentNode.insertBefore(t[i],r)}else l.a.U(e,t)},yb:function(e,t){n(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},rb:function(e,t,r){r?n(e)?e.parentNode.insertBefore(t,r.nextSibling):r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):l.e.yb(e,t)},firstChild:function(t){return n(t)?!t.nextSibling||e(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return n(t)&&(t=i(t)),t.nextSibling&&e(t.nextSibling)?null:t.nextSibling},Xb:n,lc:function(n){return(n=(o?n.text:n.nodeValue).match(a))?n[1]:null},wb:function(t){if(c[l.a.B(t)]){var r=t.firstChild;if(r)do if(1===r.nodeType){var o;o=r.firstChild;var a=null;if(o)do if(a)a.push(o);else if(n(o)){var u=i(o,!0);u?o=u:a=[o]}else e(o)&&(a=[o]);while(o=o.nextSibling);if(o=a)for(a=r.nextSibling,u=0;u<o.length;u++)a?t.insertBefore(o[u],a):t.appendChild(o[u])}while(r=r.nextSibling)}}}}(),l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.Q),l.b("virtualElements.emptyNode",l.e.da),l.b("virtualElements.insertAfter",l.e.rb),l.b("virtualElements.prepend",l.e.yb),l.b("virtualElements.setDomNodeChildren",l.e.U),function(){l.J=function(){this.Nb={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return null!=n.getAttribute("data-bind");case 8:return l.e.Xb(n);default:return!1}},getBindings:function(n,e){var t=this.getBindingsString(n,e);return t?this.parseBindingsString(t,e,n):null},getBindingAccessors:function(n,e){var t=this.getBindingsString(n,e);return t?this.parseBindingsString(t,e,n,{valueAccessors:!0}):null},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return l.e.lc(n);default:return null}},parseBindingsString:function(n,e,t,r){try{var i,o=this.Nb,a=n+(r&&r.valueAccessors||"");if(!(i=o[a])){var u,c="with($context){with($data||{}){return{"+l.g.qa(n,r)+"}}}";u=new Function("$context","$element",c),i=o[a]=u}return i(e,t)}catch(s){throw s.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+s.message,s}}}),l.J.instance=new l.J}(),l.b("bindingProvider",l.J),function(){function t(n){return function(){return n}}function r(n){return n()}function o(n){return l.a.Oa(l.k.t(n),function(e,t){return function(){return n()[t]}})}function a(n,e){return o(this.getBindings.bind(this,n,e))}function u(n,e,t){var r,i=l.e.firstChild(e),o=l.J.instance,a=o.preprocessNode;if(a){for(;r=i;)i=l.e.nextSibling(r),a.call(o,r);i=l.e.firstChild(e)}for(;r=i;)i=l.e.nextSibling(r),c(n,r,t)}function c(n,e,t){var r=!0,i=1===e.nodeType;i&&l.e.wb(e),(i&&t||l.J.instance.nodeHasBindings(e))&&(r=f(e,null,n,t).shouldBindDescendants),r&&!h[l.a.B(e)]&&u(n,e,!i)}function s(n){var e=[],t={},r=[];return l.a.A(n,function i(o){if(!t[o]){var a=l.getBindingHandler(o);a&&(a.after&&(r.push(o),l.a.r(a.after,function(e){if(n[e]){if(-1!==l.a.l(r,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(e)}}),r.length--),e.push({key:o,pb:a})),t[o]=!0}}),e}function f(e,t,i,o){var u=l.a.f.get(e,d);if(!t){if(u)throw Error("You cannot apply bindings multiple times to the same element.");l.a.f.set(e,d,!0)}!u&&o&&l.Eb(e,i);var c;if(t&&"function"!=typeof t)c=t;else{var f=l.J.instance,p=f.getBindingAccessors||a,h=l.h(function(){return(c=t?t(i,e):p.call(f,e,i))&&i.D&&i.D(),c},null,{G:e});c&&h.ga()||(h=null)}var g;if(c){var b=h?function(n){return function(){return r(h()[n])}}:function(n){return c[n]},v=function(){return l.a.Oa(h?h():c,r)};v.get=function(n){return c[n]&&r(b(n))},v.has=function(n){return n in c},o=s(c),l.a.r(o,function(t){var r=t.pb.init,o=t.pb.update,a=t.key;if(8===e.nodeType&&!l.e.Q[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof r&&l.k.t(function(){var t=r(e,b(a),v,i.$data,i);if(t&&t.controlsDescendantBindings){if(g!==n)throw Error("Multiple bindings ("+g+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");g=a}}),"function"==typeof o&&l.h(function(){o(e,b(a),v,i.$data,i)},null,{G:e})}catch(u){throw u.message='Unable to process binding "'+a+": "+c[a]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:g===n}}function p(n){return n&&n instanceof l.I?n:new l.I(n)}l.d={};var h={script:!0};l.getBindingHandler=function(n){return l.d[n]},l.I=function(e,t,r,i){var o,a=this,u="function"==typeof e&&!l.v(e),c=l.h(function(){var n=u?e():e,o=l.a.c(n);return t?(t.D&&t.D(),l.a.extend(a,t),c&&(a.D=c)):(a.$parents=[],a.$root=o,a.ko=l),a.$rawData=n,a.$data=o,r&&(a[r]=o),i&&i(a,t,o),a.$data},null,{Da:function(){return o&&!l.a.eb(o)},G:!0});c.ga()&&(a.D=c,c.equalityComparer=null,o=[],c.Jb=function(e){o.push(e),l.a.u.ja(e,function(e){l.a.ma(o,e),o.length||(c.F(),a.D=c=n)})})},l.I.prototype.createChildContext=function(n,e,t){return new l.I(n,this,e,function(n,e){n.$parentContext=e,n.$parent=e.$data,n.$parents=(e.$parents||[]).slice(0),n.$parents.unshift(n.$parent),t&&t(n)})},l.I.prototype.extend=function(n){return new l.I(this.D||this.$data,this,null,function(e,t){e.$rawData=t.$rawData,l.a.extend(e,"function"==typeof n?n():n)})};var d=l.a.f.L(),g=l.a.f.L();l.Eb=function(n,e){return 2!=arguments.length?l.a.f.get(n,g):(l.a.f.set(n,g,e),void(e.D&&e.D.Jb(n)))},l.xa=function(n,e,t){return 1===n.nodeType&&l.e.wb(n),f(n,e,p(t),!0)},l.Lb=function(n,e,r){return r=p(r),l.xa(n,"function"==typeof e?o(e.bind(null,r,n)):l.a.Oa(e,t),r)},l.gb=function(n,e){1!==e.nodeType&&8!==e.nodeType||u(p(n),e,!0)},l.fb=function(n,t){if(!i&&e.jQuery&&(i=e.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||e.document.body,c(p(n),t,!0)},l.Ca=function(e){switch(e.nodeType){case 1:case 8:var t=l.Eb(e);if(t)return t;if(e.parentNode)return l.Ca(e.parentNode)}return n},l.Pb=function(e){return(e=l.Ca(e))?e.$data:n},l.b("bindingHandlers",l.d),l.b("applyBindings",l.fb),l.b("applyBindingsToDescendants",l.gb),l.b("applyBindingAccessorsToNode",l.xa),l.b("applyBindingsToNode",l.Lb),l.b("contextFor",l.Ca),l.b("dataFor",l.Pb)}();var b={"class":"className","for":"htmlFor"};l.d.attr={update:function(e,t){var r=l.a.c(t())||{};l.a.A(r,function(t,r){r=l.a.c(r);var i=!1===r||null===r||r===n;i&&e.removeAttribute(t),8>=l.a.oa&&t in b?(t=b[t],i?e.removeAttribute(t):e[t]=r):i||e.setAttribute(t,r.toString()),"name"===t&&l.a.Cb(e,i?"":r.toString())})}},function(){l.d.checked={after:["value","attr"],init:function(e,t,r){function i(){return r.has("checkedValue")?l.a.c(r.get("checkedValue")):e.value
}function o(){var n=e.checked,o=p?i():n;if(!l.ca.pa()&&(!c||n)){var a=l.k.t(t);s?f!==o?(n&&(l.a.Y(a,o,!0),l.a.Y(a,f,!1)),f=o):l.a.Y(a,o,n):l.g.va(a,r,"checked",o,!0)}}function a(){var n=l.a.c(t());e.checked=s?0<=l.a.l(n,i()):u?n:i()===n}var u="checkbox"==e.type,c="radio"==e.type;if(u||c){var s=u&&l.a.c(t())instanceof Array,f=s?i():n,p=c||s;c&&!e.name&&l.d.uniqueName.init(e,function(){return!0}),l.ba(o,null,{G:e}),l.a.q(e,"click",o),l.ba(a,null,{G:e})}}},l.g.W.checked=!0,l.d.checkedValue={update:function(n,e){n.value=l.a.c(e())}}}(),l.d.css={update:function(n,e){var t=l.a.c(e());"object"==typeof t?l.a.A(t,function(e,t){t=l.a.c(t),l.a.ua(n,e,t)}):(t=String(t||""),l.a.ua(n,n.__ko__cssValue,!1),n.__ko__cssValue=t,l.a.ua(n,t,!0))}},l.d.enable={update:function(n,e){var t=l.a.c(e());t&&n.disabled?n.removeAttribute("disabled"):t||n.disabled||(n.disabled=!0)}},l.d.disable={update:function(n,e){l.d.enable.update(n,function(){return!l.a.c(e())})}},l.d.event={init:function(n,e,t,r,i){var o=e()||{};l.a.A(o,function(o){"string"==typeof o&&l.a.q(n,o,function(n){var a,u=e()[o];if(u){try{var c=l.a.R(arguments);r=i.$data,c.unshift(r),a=u.apply(r,c)}finally{!0!==a&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}!1===t.get(o+"Bubble")&&(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}},l.d.foreach={vb:function(n){return function(){var e=n(),t=l.a.Sa(e);return t&&"number"!=typeof t.length?(l.a.c(e),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:l.K.Ja}):{foreach:e,templateEngine:l.K.Ja}}},init:function(n,e){return l.d.template.init(n,l.d.foreach.vb(e))},update:function(n,e,t,r,i){return l.d.template.update(n,l.d.foreach.vb(e),t,r,i)}},l.g.aa.foreach=!1,l.e.Q.foreach=!0,l.d.hasfocus={init:function(n,e,t){function r(r){n.__ko_hasfocusUpdating=!0;var i=n.ownerDocument;if("activeElement"in i){var o;try{o=i.activeElement}catch(a){o=i.body}r=o===n}i=e(),l.g.va(i,t,"hasfocus",r,!0),n.__ko_hasfocusLastValue=r,n.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),o=r.bind(null,!1);l.a.q(n,"focus",i),l.a.q(n,"focusin",i),l.a.q(n,"blur",o),l.a.q(n,"focusout",o)},update:function(n,e){var t=!!l.a.c(e());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===t||(t?n.focus():n.blur(),l.k.t(l.a.ha,null,[n,t?"focusin":"focusout"]))}},l.g.W.hasfocus=!0,l.d.hasFocus=l.d.hasfocus,l.g.W.hasFocus=!0,l.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,e){l.a.Va(n,e())}},f("if"),f("ifnot",!1,!0),f("with",!0,!1,function(n,e){return n.createChildContext(e)});var v={};l.d.options={init:function(n){if("select"!==l.a.B(n))throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,r){function i(){return l.a.la(e.options,function(n){return n.selected})}function o(n,e,t){var r=typeof e;return"function"==r?e(n):"string"==r?n[e]:t}function a(n,t){if(p.length){var r=0<=l.a.l(p,l.i.p(t[0]));l.a.Db(t[0],r),h&&!r&&l.k.t(l.a.ha,null,[e,"change"])}}var u=0!=e.length&&e.multiple?e.scrollTop:null,c=l.a.c(t()),s=r.get("optionsIncludeDestroyed");t={};var f,p;p=e.multiple?l.a.ya(i(),l.i.p):0<=e.selectedIndex?[l.i.p(e.options[e.selectedIndex])]:[],c&&("undefined"==typeof c.length&&(c=[c]),f=l.a.la(c,function(e){return s||e===n||null===e||!l.a.c(e._destroy)}),r.has("optionsCaption")&&(c=l.a.c(r.get("optionsCaption")),null!==c&&c!==n&&f.unshift(v)));var h=!1;t.beforeRemove=function(n){e.removeChild(n)},c=a,r.has("optionsAfterRender")&&(c=function(e,t){a(0,t),l.k.t(r.get("optionsAfterRender"),null,[t[0],e!==v?e:n])}),l.a.Ua(e,f,function(t,i,a){return a.length&&(p=a[0].selected?[l.i.p(a[0])]:[],h=!0),i=e.ownerDocument.createElement("option"),t===v?(l.a.Xa(i,r.get("optionsCaption")),l.i.X(i,n)):(a=o(t,r.get("optionsValue"),t),l.i.X(i,l.a.c(a)),t=o(t,r.get("optionsText"),a),l.a.Xa(i,t)),[i]},t,c),l.k.t(function(){r.get("valueAllowUnset")&&r.has("value")?l.i.X(e,l.a.c(r.get("value")),!0):(e.multiple?p.length&&i().length<p.length:p.length&&0<=e.selectedIndex?l.i.p(e.options[e.selectedIndex])!==p[0]:p.length||0<=e.selectedIndex)&&l.a.ha(e,"change")}),l.a.Tb(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},l.d.options.Pa=l.a.f.L(),l.d.selectedOptions={after:["options","foreach"],init:function(n,e,t){l.a.q(n,"change",function(){var r=e(),i=[];l.a.r(n.getElementsByTagName("option"),function(n){n.selected&&i.push(l.i.p(n))}),l.g.va(r,t,"selectedOptions",i)})},update:function(n,e){if("select"!=l.a.B(n))throw Error("values binding applies only to SELECT elements");var t=l.a.c(e());t&&"number"==typeof t.length&&l.a.r(n.getElementsByTagName("option"),function(n){var e=0<=l.a.l(t,l.i.p(n));l.a.Db(n,e)})}},l.g.W.selectedOptions=!0,l.d.style={update:function(n,e){var t=l.a.c(e()||{});l.a.A(t,function(e,t){t=l.a.c(t),n.style[e]=t||""})}},l.d.submit={init:function(n,e,t,r,i){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");l.a.q(n,"submit",function(t){var r,o=e();try{r=o.call(i.$data,n)}finally{!0!==r&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}})}},l.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,e){l.a.Xa(n,e())}},l.e.Q.text=!0,l.d.uniqueName={init:function(n,e){if(e()){var t="ko_unique_"+ ++l.d.uniqueName.Ob;l.a.Cb(n,t)}}},l.d.uniqueName.Ob=0,l.d.value={after:["options","foreach"],init:function(n,e,t){function r(){a=!1;var r=e(),i=l.i.p(n);l.g.va(r,t,"value",i)}var i=["change"],o=t.get("valueUpdate"),a=!1;o&&("string"==typeof o&&(o=[o]),l.a.$(i,o),i=l.a.ib(i)),!l.a.oa||"input"!=n.tagName.toLowerCase()||"text"!=n.type||"off"==n.autocomplete||n.form&&"off"==n.form.autocomplete||-1!=l.a.l(i,"propertychange")||(l.a.q(n,"propertychange",function(){a=!0}),l.a.q(n,"focus",function(){a=!1}),l.a.q(n,"blur",function(){a&&r()})),l.a.r(i,function(e){var t=r;l.a.kc(e,"after")&&(t=function(){setTimeout(r,0)},e=e.substring(5)),l.a.q(n,e,t)})},update:function(n,e,t){var r=l.a.c(e());if(e=l.i.p(n),r!==e)if("select"===l.a.B(n)){var i=t.get("valueAllowUnset");t=function(){l.i.X(n,r,i)},t(),i||r===l.i.p(n)?setTimeout(t,0):l.k.t(l.a.ha,null,[n,"change"])}else l.i.X(n,r)}},l.g.W.value=!0,l.d.visible={update:function(n,e){var t=l.a.c(e()),r="none"!=n.style.display;t&&!r?n.style.display="":!t&&r&&(n.style.display="none")}},function(n){l.d[n]={init:function(e,t,r,i,o){return l.d.event.init.call(this,e,function(){var e={};return e[n]=t(),e},r,i,o)}}}("click"),l.C=function(){},l.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},l.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},l.C.prototype.makeTemplateSource=function(n,e){if("string"==typeof n){e=e||t;var r=e.getElementById(n);if(!r)throw Error("Cannot find template with ID "+n);return new l.n.j(r)}if(1==n.nodeType||8==n.nodeType)return new l.n.Z(n);throw Error("Unknown template type: "+n)},l.C.prototype.renderTemplate=function(n,e,t,r){return n=this.makeTemplateSource(n,r),this.renderTemplateSource(n,e,t)},l.C.prototype.isTemplateRewritten=function(n,e){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(n,e).data("isRewritten")},l.C.prototype.rewriteTemplate=function(n,e,t){n=this.makeTemplateSource(n,t),e=e(n.text()),n.text(e),n.data("isRewritten",!0)},l.b("templateEngine",l.C),l.Za=function(){function n(n,e,t,r){n=l.g.Ra(n);for(var i=l.g.aa,o=0;o<n.length;o++){var a=n[o].key;if(i.hasOwnProperty(a)){var u=i[a];if("function"==typeof u){if(a=u(n[o].value))throw Error(a)}else if(!u)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return t="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.qa(n,{valueAccessors:!0})+" } })()},'"+t.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(t)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,t=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(n,e,t){e.isTemplateRewritten(n,t)||e.rewriteTemplate(n,function(n){return l.Za.dc(n,e)},t)},dc:function(r,i){return r.replace(e,function(e,t,r,o,a){return n(a,t,r,i)}).replace(t,function(e,t){return n(t,"<!-- ko -->","#comment",i)})},Mb:function(n,e){return l.w.Na(function(t,r){var i=t.nextSibling;i&&i.nodeName.toLowerCase()===e&&l.xa(i,n,r)})}}}(),l.b("__tr_ambtns",l.Za.Mb),function(){l.n={},l.n.j=function(n){this.j=n},l.n.j.prototype.text=function(){var n=l.a.B(this.j),n="script"===n?"text":"textarea"===n?"value":"innerHTML";if(0==arguments.length)return this.j[n];var e=arguments[0];"innerHTML"===n?l.a.Va(this.j,e):this.j[n]=e};var e=l.a.f.L()+"_";l.n.j.prototype.data=function(n){return 1===arguments.length?l.a.f.get(this.j,e+n):void l.a.f.set(this.j,e+n,arguments[1])};var t=l.a.f.L();l.n.Z=function(n){this.j=n},l.n.Z.prototype=new l.n.j,l.n.Z.prototype.text=function(){if(0==arguments.length){var e=l.a.f.get(this.j,t)||{};return e.$a===n&&e.Ba&&(e.$a=e.Ba.innerHTML),e.$a}l.a.f.set(this.j,t,{$a:arguments[0]})},l.n.j.prototype.nodes=function(){return 0==arguments.length?(l.a.f.get(this.j,t)||{}).Ba:void l.a.f.set(this.j,t,{Ba:arguments[0]})},l.b("templateSources",l.n),l.b("templateSources.domElement",l.n.j),l.b("templateSources.anonymousTemplate",l.n.Z)}(),function(){function e(n,e,t){var r;for(e=l.e.nextSibling(e);n&&(r=n)!==e;)n=l.e.nextSibling(r),t(r,n)}function t(n,t){if(n.length){var r=n[0],i=n[n.length-1],o=r.parentNode,a=l.J.instance,u=a.preprocessNode;if(u){if(e(r,i,function(n,e){var t=n.previousSibling,o=u.call(a,n);o&&(n===r&&(r=o[0]||e),n===i&&(i=o[o.length-1]||t))}),n.length=0,!r)return;r===i?n.push(r):(n.push(r,i),l.a.ea(n,o))}e(r,i,function(n){1!==n.nodeType&&8!==n.nodeType||l.fb(t,n)}),e(r,i,function(n){1!==n.nodeType&&8!==n.nodeType||l.w.Ib(n,[t])}),l.a.ea(n,o)}}function r(n){return n.nodeType?n:0<n.length?n[0]:null}function i(n,e,i,a,u){u=u||{};var c=n&&r(n),c=c&&c.ownerDocument,s=u.templateEngine||o;if(l.Za.Ub(i,s,c),i=s.renderTemplate(i,a,u,c),"number"!=typeof i.length||0<i.length&&"number"!=typeof i[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(c=!1,e){case"replaceChildren":l.e.U(n,i),c=!0;break;case"replaceNode":l.a.Bb(n,i),c=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return c&&(t(i,a),u.afterRender&&l.k.t(u.afterRender,null,[i,a.$data])),i}var o;l.Wa=function(e){if(e!=n&&!(e instanceof l.C))throw Error("templateEngine must inherit from ko.templateEngine");o=e},l.Ta=function(e,t,a,u,c){if(a=a||{},(a.templateEngine||o)==n)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",u){var s=r(u);return l.h(function(){var n=t&&t instanceof l.I?t:new l.I(l.a.c(t)),o=l.v(e)?e():"function"==typeof e?e(n.$data,n):e,n=i(u,c,o,n,a);"replaceNode"==c&&(u=n,s=r(u))},null,{Da:function(){return!s||!l.a.Ea(s)},G:s&&"replaceNode"==c?s.parentNode:s})}return l.w.Na(function(n){l.Ta(e,t,a,n,"replaceNode")})},l.jc=function(e,r,o,a,u){function c(n,e){t(e,f),o.afterRender&&o.afterRender(e,n)}function s(n,t){f=u.createChildContext(n,o.as,function(n){n.$index=t});var r="function"==typeof e?e(n,f):e;return i(null,"ignoreTargetNode",r,f,o)}var f;return l.h(function(){var e=l.a.c(r)||[];"undefined"==typeof e.length&&(e=[e]),e=l.a.la(e,function(e){return o.includeDestroyed||e===n||null===e||!l.a.c(e._destroy)}),l.k.t(l.a.Ua,null,[a,e,s,o,c])},null,{G:a})};var a=l.a.f.L();l.d.template={init:function(n,e){var t=l.a.c(e());return"string"==typeof t||t.name?l.e.da(n):(t=l.e.childNodes(n),t=l.a.ec(t),new l.n.Z(n).nodes(t)),{controlsDescendantBindings:!0}},update:function(e,t,r,i,o){var u,c=t();t=l.a.c(c),r=!0,i=null,"string"==typeof t?t={}:(c=t.name,"if"in t&&(r=l.a.c(t["if"])),r&&"ifnot"in t&&(r=!l.a.c(t.ifnot)),u=l.a.c(t.data)),"foreach"in t?i=l.jc(c||e,r&&t.foreach||[],t,e,o):r?(o="data"in t?o.createChildContext(u,t.as):o,i=l.Ta(c||e,o,t,e)):l.e.da(e),o=i,(u=l.a.f.get(e,a))&&"function"==typeof u.F&&u.F(),l.a.f.set(e,a,o&&o.ga()?o:n)}},l.g.aa.template=function(n){return n=l.g.Ra(n),1==n.length&&n[0].unknown||l.g.bc(n,"name")?null:"This template engine does not support anonymous templates nested within its templates"},l.e.Q.template=!0}(),l.b("setTemplateEngine",l.Wa),l.b("renderTemplate",l.Ta),l.a.nb=function(n,e,t){if(n.length&&e.length){var r,i,o,a,u;for(r=i=0;(!t||t>r)&&(a=n[i]);++i){for(o=0;u=e[o];++o)if(a.value===u.value){a.moved=u.index,u.moved=a.index,e.splice(o,1),r=o=0;break}r+=o}}},l.a.Aa=function(){function n(n,e,t,r,i){var o,a,u,c,s,f=Math.min,p=Math.max,h=[],d=n.length,g=e.length,b=g-d||1,v=d+g+1;for(o=0;d>=o;o++)for(c=u,h.push(u=[]),s=f(g,o+b),a=p(0,o-1);s>=a;a++)u[a]=a?o?n[o-1]===e[a-1]?c[a-1]:f(c[a]||v,u[a-1]||v)+1:a+1:o+1;for(f=[],p=[],b=[],o=d,a=g;o||a;)g=h[o][a]-1,a&&g===h[o][a-1]?p.push(f[f.length]={status:t,value:e[--a],index:a}):o&&g===h[o-1][a]?b.push(f[f.length]={status:r,value:n[--o],index:o}):(--a,--o,i.sparse||f.push({status:"retained",value:e[a]}));return l.a.nb(p,b,10*d),f.reverse()}return function(e,t,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},e=e||[],t=t||[],e.length<=t.length?n(e,t,"added","deleted",r):n(t,e,"deleted","added",r)}}(),l.b("utils.compareArrays",l.a.Aa),function(){function e(e,t,r,i,o){var a=[],u=l.h(function(){var n=t(r,o,l.a.ea(a,e))||[];0<a.length&&(l.a.Bb(a,n),i&&l.k.t(i,null,[r,n,o])),a.length=0,l.a.$(a,n)},null,{G:e,Da:function(){return!l.a.eb(a)}});return{S:a,h:u.ga()?u:n}}var t=l.a.f.L();l.a.Ua=function(r,i,o,a,u){function c(n,e){w=p[e],v!==e&&(k[n]=w),w.Ia(v++),l.a.ea(w.S,r),g.push(w),y.push(w)}function s(n,e){if(n)for(var t=0,r=e.length;r>t;t++)e[t]&&l.a.r(e[t].S,function(r){n(r,t,e[t].ka)})}i=i||[],a=a||{};var f=l.a.f.get(r,t)===n,p=l.a.f.get(r,t)||[],h=l.a.ya(p,function(n){return n.ka}),d=l.a.Aa(h,i,a.dontLimitMoves),g=[],b=0,v=0,m=[],y=[];i=[];for(var w,_,x,k=[],h=[],T=0;_=d[T];T++)switch(x=_.moved,_.status){case"deleted":x===n&&(w=p[b],w.h&&w.h.F(),m.push.apply(m,l.a.ea(w.S,r)),a.beforeRemove&&(i[T]=w,y.push(w))),b++;break;case"retained":c(T,b++);break;case"added":x!==n?c(T,x):(w={ka:_.value,Ia:l.m(v++)},g.push(w),y.push(w),f||(h[T]=w))}s(a.beforeMove,k),l.a.r(m,a.beforeRemove?l.M:l.removeNode);for(var E,T=0,f=l.e.firstChild(r);w=y[T];T++){for(w.S||l.a.extend(w,e(r,o,w.ka,u,w.Ia)),b=0;d=w.S[b];f=d.nextSibling,E=d,b++)d!==f&&l.e.rb(r,d,E);!w.Zb&&u&&(u(w.ka,w.S,w.Ia),w.Zb=!0)}s(a.beforeRemove,i),s(a.afterMove,k),s(a.afterAdd,h),l.a.f.set(r,t,g)}}(),l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.Ua),l.K=function(){this.allowTemplateRewriting=!1},l.K.prototype=new l.C,l.K.prototype.renderTemplateSource=function(n){var e=(9>l.a.oa?0:n.nodes)?n.nodes():null;return e?l.a.R(e.cloneNode(!0).childNodes):(n=n.text(),l.a.Qa(n))},l.K.Ja=new l.K,l.Wa(l.K.Ja),l.b("nativeTemplateEngine",l.K),function(){l.La=function(){var n=this.ac=function(){if(!i||!i.tmpl)return 0;try{if(0<=i.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(n){}return 1}();this.renderTemplateSource=function(e,r,o){if(o=o||{},2>n)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=e.data("precompiled");return a||(a=e.text()||"",a=i.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),e.data("precompiled",a)),e=[r.$data],r=i.extend({koBindingContext:r},o.templateOptions),r=i.tmpl(a,e,r),r.appendTo(t.createElement("div")),i.fragments={},r},this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"},this.addTemplate=function(n,e){t.write("<script type='text/html' id='"+n+"'>"+e+"</script>")},n>0&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.La.prototype=new l.C;var n=new l.La;0<n.ac&&l.Wa(n),l.b("jqueryTmplTemplateEngine",l.La)}()})})()})(),function(){function n(n,e,t){for(var r=(t||0)-1,i=n?n.length:0;++r<i;)if(n[r]===e)return r;return-1}function e(n,e){for(var t=n.criteria,r=e.criteria,i=-1,o=t.length;++i<o;){var a=t[i],u=r[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return n.index-e.index}function t(n){return"\\"+_t[n]}function r(n,e,t){e||(e=0),"undefined"==typeof t&&(t=n?n.length:0);for(var r=-1,i=t-e||0,o=Array(0>i?0:i);++r<i;)o[r]=n[e+r];return o}function i(n){return n instanceof i?n:new o(n)}function o(n,e){this.__chain__=!!e,this.__wrapped__=n}function a(n){function e(){if(i){var n=r(i);Rt.apply(n,arguments)}if(this instanceof e){var a=u(t.prototype),c=t.apply(a,n||arguments);return R(c)?c:a}return t.apply(o,n||arguments)}var t=n[0],i=n[2],o=n[4];return e}function u(n){return R(n)?It(n):{}}function c(n,e,t){if("function"!=typeof n)return ze;if("undefined"==typeof e||!("prototype"in n))return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)}}return De(n,e)}function s(n){function e(){var n=l?c:this;if(o){var b=r(o);Rt.apply(b,arguments)}if((a||h)&&(b||(b=r(arguments)),a&&Rt.apply(b,a),h&&b.length<f))return i|=16,s([t,d?i:-4&i,b,null,c,f]);if(b||(b=arguments),p&&(t=n[g]),this instanceof e){n=u(t.prototype);var v=t.apply(n,b);return R(v)?v:n}return t.apply(n,b)}var t=n[0],i=n[1],o=n[2],a=n[3],c=n[4],f=n[5],l=1&i,p=2&i,h=4&i,d=8&i,g=t;return e}function f(n,e){for(var t=-1,r=m(),i=n?n.length:0,o=[];++t<i;){var a=n[t];r(e,a)<0&&o.push(a)}return o}function l(n,e,t,r){for(var i=(r||0)-1,o=n?n.length:0,a=[];++i<o;){var u=n[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Ut(u)||_(u))){e||(u=l(u,e,t));var c=-1,s=u.length,f=a.length;for(a.length+=s;++c<s;)a[f++]=u[c]}else t||a.push(u)}return a}function p(n,e,t,r){if(n===e)return 0!==n||1/n==1/e;var o=typeof n,a=typeof e;if(!(n!==n||n&&wt[o]||e&&wt[a]))return!1;if(null==n||null==e)return n===e;var u=jt.call(n),c=jt.call(e);if(u!=c)return!1;switch(u){case ht:case dt:return+n==+e;case bt:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case mt:case yt:return n==String(e)}var s=u==pt;if(!s){var f=n instanceof i,l=e instanceof i;if(f||l)return p(f?n.__wrapped__:n,l?e.__wrapped__:e,t,r);if(u!=vt)return!1;var h=n.constructor,d=e.constructor;if(h!=d&&!(M(h)&&h instanceof h&&M(d)&&d instanceof d)&&"constructor"in n&&"constructor"in e)return!1}t||(t=[]),r||(r=[]);for(var g=t.length;g--;)if(t[g]==n)return r[g]==e;var b=!0,v=0;if(t.push(n),r.push(e),s){if(v=e.length,b=v==n.length)for(;v--&&(b=p(n[v],e[v],t,r)););}else Zt(e,function(e,i,o){return Mt.call(o,i)?(v++,!(b=Mt.call(n,i)&&p(n[i],e,t,r))&&at):void 0}),b&&Zt(n,function(n,e,t){return Mt.call(t,e)?!(b=--v>-1)&&at:void 0});return t.pop(),r.pop(),b}function h(n,e){return n+Bt(zt()*(e-n+1))}function d(n,e,t){for(var r=-1,i=m(),o=n?n.length:0,a=[],u=t?[]:a;++r<o;){var c=n[r],s=t?t(c,r,n):c;(e?!r||u[u.length-1]!==s:i(u,s)<0)&&(t&&u.push(s),a.push(c))}return a}function g(n){return function(e,t,r){var i={};t=Ve(t,r,3);var o=-1,a=e?e.length:0;if("number"==typeof a)for(;++o<a;){var u=e[o];n(i,u,t(u,o,e),e)}else nr(e,function(e,r,o){n(i,e,t(e,r,o),o)});return i}}function b(n,e,t,r,i,o){var u=2&e,c=16&e,f=32&e;if(!u&&!M(n))throw new TypeError;c&&!t.length&&(e&=-17,c=t=!1),f&&!r.length&&(e&=-33,f=r=!1);var l=1==e||17===e?a:s;return l([n,e,t,r,i,o])}function v(n){return Gt[n]}function m(){var e=(e=i.indexOf)===ve?n:e;return e}function y(n){return"function"==typeof n&&Dt.test(n)}function w(n){return Qt[n]}function _(n){return n&&"object"==typeof n&&"number"==typeof n.length&&jt.call(n)==lt||!1}function x(n){if(!n)return n;for(var e=1,t=arguments.length;t>e;e++){var r=arguments[e];if(r)for(var i in r)n[i]=r[i]}return n}function k(n){return R(n)?Ut(n)?r(n):x({},n):n}function T(n){if(!n)return n;for(var e=1,t=arguments.length;t>e;e++){var r=arguments[e];if(r)for(var i in r)"undefined"==typeof n[i]&&(n[i]=r[i])}return n}function E(n){var e=[];return Zt(n,function(n,t){M(n)&&e.push(t)}),e.sort()}function N(n,e){return n?Mt.call(n,e):!1}function C(n){for(var e=-1,t=Yt(n),r=t.length,i={};++e<r;){var o=t[e];i[n[o]]=o}return i}function S(n){return n===!0||n===!1||n&&"object"==typeof n&&jt.call(n)==ht||!1}function A(n){return n&&"object"==typeof n&&jt.call(n)==dt||!1}function j(n){return n&&1===n.nodeType||!1}function D(n){if(!n)return!0;if(Ut(n)||q(n))return!n.length;for(var e in n)if(Mt.call(n,e))return!1;return!0}function O(n,e){return p(n,e)}function B(n){return Ft(n)&&!qt(parseFloat(n))}function M(n){return"function"==typeof n}function R(n){return!(!n||!wt[typeof n])}function $(n){return L(n)&&n!=+n}function I(n){return null===n}function L(n){return"number"==typeof n||n&&"object"==typeof n&&jt.call(n)==bt||!1}function F(n){return n&&wt[typeof n]&&jt.call(n)==mt||!1}function q(n){return"string"==typeof n||n&&"object"==typeof n&&jt.call(n)==yt||!1}function H(n){return"undefined"==typeof n}function V(n){var e=[];Zt(n,function(n,t){e.push(t)}),e=f(e,l(arguments,!0,!1,1));for(var t=-1,r=e.length,i={};++t<r;){var o=e[t];i[o]=n[o]}return i}function P(n){for(var e=-1,t=Yt(n),r=t.length,i=Array(r);++e<r;){var o=t[e];i[e]=[o,n[o]]}return i}function z(n){for(var e=-1,t=l(arguments,!0,!1,1),r=t.length,i={};++e<r;){var o=t[e];o in n&&(i[o]=n[o])}return i}function J(n){for(var e=-1,t=Yt(n),r=t.length,i=Array(r);++e<r;)i[e]=n[t[e]];return i}function U(n,e){var t=m(),r=n?n.length:0,i=!1;return r&&"number"==typeof r?i=t(n,e)>-1:nr(n,function(n){return(i=n===e)&&at}),i}function W(n,e,t){var r=!0;e=Ve(e,t,3);var i=-1,o=n?n.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(n[i],i,n)););else nr(n,function(n,t,i){return!(r=!!e(n,t,i))&&at});return r}function Y(n,e,t){var r=[];e=Ve(e,t,3);var i=-1,o=n?n.length:0;if("number"==typeof o)for(;++i<o;){var a=n[i];e(a,i,n)&&r.push(a)}else nr(n,function(n,t,i){e(n,t,i)&&r.push(n)});return r}function G(n,e,t){e=Ve(e,t,3);var r=-1,i=n?n.length:0;if("number"!=typeof i){var o;return nr(n,function(n,t,r){return e(n,t,r)?(o=n,at):void 0}),o}for(;++r<i;){var a=n[r];if(e(a,r,n))return a}}function Q(n,e){return pe(n,e,!0)}function K(n,e,t){var r=-1,i=n?n.length:0;if(e=e&&"undefined"==typeof t?e:c(e,t,3),"number"==typeof i)for(;++r<i&&e(n[r],r,n)!==at;);else nr(n,e)}function X(n,e){var t=n?n.length:0;if("number"==typeof t)for(;t--&&e(n[t],t,n)!==!1;);else{var r=Yt(n);t=r.length,nr(n,function(n,i,o){return i=r?r[--t]:--t,e(o[i],i,o)===!1&&at})}}function Z(n,e){var t=r(arguments,2),i=-1,o="function"==typeof e,a=n?n.length:0,u=Array("number"==typeof a?a:0);return K(n,function(n){u[++i]=(o?e:n[e]).apply(n,t)}),u}function ne(n,e,t){var r=-1,i=n?n.length:0;if(e=Ve(e,t,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(n[r],r,n);else o=[],nr(n,function(n,t,i){o[++r]=e(n,t,i)});return o}function ee(n,e,t){var r=-1/0,i=r;"function"!=typeof e&&t&&t[e]===n&&(e=null);var o=-1,a=n?n.length:0;if(null==e&&"number"==typeof a)for(;++o<a;){var u=n[o];u>i&&(i=u)}else e=Ve(e,t,3),K(n,function(n,t,o){var a=e(n,t,o);a>r&&(r=a,i=n)});return i}function te(n,e,t){var r=1/0,i=r;"function"!=typeof e&&t&&t[e]===n&&(e=null);var o=-1,a=n?n.length:0;if(null==e&&"number"==typeof a)for(;++o<a;){var u=n[o];i>u&&(i=u)}else e=Ve(e,t,3),K(n,function(n,t,o){var a=e(n,t,o);r>a&&(r=a,i=n)});return i}function re(n,e,t,r){if(!n)return t;var i=arguments.length<3;e=Ve(e,r,4);var o=-1,a=n.length;if("number"==typeof a)for(i&&(t=n[++o]);++o<a;)t=e(t,n[o],o,n);else nr(n,function(n,r,o){t=i?(i=!1,n):e(t,n,r,o)});return t}function ie(n,e,t,r){var i=arguments.length<3;return e=Ve(e,r,4),X(n,function(n,r,o){t=i?(i=!1,n):e(t,n,r,o)}),t}function oe(n,e,t){return e=Ve(e,t,3),Y(n,function(n,t,r){return!e(n,t,r)})}function ae(n,e,t){if(n&&"number"!=typeof n.length&&(n=J(n)),null==e||t)return n?n[h(0,n.length-1)]:it;var r=ue(n);return r.length=Pt(Vt(0,e),r.length),r}function ue(n){var e=-1,t=n?n.length:0,r=Array("number"==typeof t?t:0);return K(n,function(n){var t=h(0,++e);r[e]=r[t],r[t]=n}),r}function ce(n){var e=n?n.length:0;return"number"==typeof e?e:Yt(n).length}function se(n,e,t){var r;e=Ve(e,t,3);var i=-1,o=n?n.length:0;if("number"==typeof o)for(;++i<o&&!(r=e(n[i],i,n)););else nr(n,function(n,t,i){return(r=e(n,t,i))&&at});return!!r}function fe(n,t,r){var i=-1,o=n?n.length:0,a=Array("number"==typeof o?o:0);for(t=Ve(t,r,3),K(n,function(n,e,r){a[++i]={criteria:[t(n,e,r)],index:i,value:n}}),o=a.length,a.sort(e);o--;)a[o]=a[o].value;return a}function le(n){return Ut(n)?r(n):n&&"number"==typeof n.length?ne(n):J(n)}function pe(n,e,t){return t&&D(e)?it:(t?G:Y)(n,e)}function he(n){for(var e=-1,t=n?n.length:0,r=[];++e<t;){var i=n[e];i&&r.push(i)}return r}function de(n){return f(n,l(arguments,!0,!0,1))}function ge(n,e,t){var i=0,o=n?n.length:0;if("number"!=typeof e&&null!=e){var a=-1;for(e=Ve(e,t,3);++a<o&&e(n[a],a,n);)i++}else if(i=e,null==i||t)return n?n[0]:it;return r(n,0,Pt(Vt(0,i),o))}function be(n,e){return l(n,e)}function ve(e,t,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Vt(0,i+r):r||0}else if(r){var o=Te(e,t);return e[o]===t?o:-1}return n(e,t,r)}function me(n,e,t){var i=0,o=n?n.length:0;if("number"!=typeof e&&null!=e){var a=o;for(e=Ve(e,t,3);a--&&e(n[a],a,n);)i++}else i=null==e||t?1:e||i;return r(n,0,Pt(Vt(0,o-i),o))}function ye(){for(var n=[],e=-1,t=arguments.length;++e<t;){var r=arguments[e];(Ut(r)||_(r))&&n.push(r)}var i=n[0],o=-1,a=m(),u=i?i.length:0,c=[];n:for(;++o<u;)if(r=i[o],a(c,r)<0){for(var e=t;--e;)if(a(n[e],r)<0)continue n;c.push(r)}return c}function we(n,e,t){var i=0,o=n?n.length:0;if("number"!=typeof e&&null!=e){var a=o;for(e=Ve(e,t,3);a--&&e(n[a],a,n);)i++}else if(i=e,null==i||t)return n?n[o-1]:it;return r(n,Vt(0,o-i))}function _e(n,e,t){var r=n?n.length:0;for("number"==typeof t&&(r=(0>t?Vt(0,r+t):Pt(t,r-1))+1);r--;)if(n[r]===e)return r;return-1}function xe(n,e,t){n=+n||0,t=+t||1,null==e&&(e=n,n=0);for(var r=-1,i=Vt(0,Ot((e-n)/t)),o=Array(i);++r<i;)o[r]=n,n+=t;return o}function ke(n,e,t){if("number"!=typeof e&&null!=e){var i=0,o=-1,a=n?n.length:0;for(e=Ve(e,t,3);++o<a&&e(n[o],o,n);)i++}else i=null==e||t?1:Vt(0,e);return r(n,i)}function Te(n,e,t,r){var i=0,o=n?n.length:i;for(t=t?Ve(t,r,1):ze,e=t(e);o>i;){var a=i+o>>>1;t(n[a])<e?i=a+1:o=a}return i}function Ee(){return d(l(arguments,!0,!0))}function Ne(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t="function"!=typeof e&&r&&r[e]===n?null:e,e=!1),null!=t&&(t=Ve(t,r,3)),d(n,e,t)}function Ce(n){return f(n,r(arguments,1))}function Se(){for(var n=-1,e=ee(ir(arguments,"length")),t=Array(0>e?0:e);++n<e;)t[n]=ir(arguments,n);return t}function Ae(n,e){var t=-1,r=n?n.length:0,i={};for(e||!r||Ut(n[0])||(e=[]);++t<r;){var o=n[t];e?i[o]=e[t]:o&&(i[o[0]]=o[1])}return i}function je(n,e){if(!M(e))throw new TypeError;return function(){return--n<1?e.apply(this,arguments):void 0}}function De(n,e){return arguments.length>2?b(n,17,r(arguments,2),null,e):b(n,1,null,null,e)}function Oe(n){for(var e=arguments.length>1?l(arguments,!0,!1,1):E(n),t=-1,r=e.length;++t<r;){var i=e[t];n[i]=b(n[i],1,null,null,n)}return n}function Be(){for(var n=arguments,e=n.length;e--;)if(!M(n[e]))throw new TypeError;return function(){for(var e=arguments,t=n.length;t--;)e=[n[t].apply(this,e)];return e[0]}}function Me(n,e,t){var r,i,o,a,u,c,s,f=0,l=!1,p=!0;if(!M(n))throw new TypeError;if(e=Vt(0,e)||0,t===!0){var h=!0;p=!1}else R(t)&&(h=t.leading,l="maxWait"in t&&(Vt(e,t.maxWait)||0),p="trailing"in t?t.trailing:p);var d=function(){var t=e-(or()-a);if(0>=t){i&&clearTimeout(i);var l=s;i=c=s=it,l&&(f=or(),o=n.apply(u,r),c||i||(r=u=null))}else c=setTimeout(d,t)},g=function(){c&&clearTimeout(c),i=c=s=it,(p||l!==e)&&(f=or(),o=n.apply(u,r),c||i||(r=u=null))};return function(){if(r=arguments,a=or(),u=this,s=p&&(c||!h),l===!1)var t=h&&!c;else{i||h||(f=a);var b=l-(a-f),v=0>=b;v?(i&&(i=clearTimeout(i)),f=a,o=n.apply(u,r)):i||(i=setTimeout(g,b))}return v&&c?c=clearTimeout(c):c||e===l||(c=setTimeout(d,e)),t&&(v=!0,o=n.apply(u,r)),!v||c||i||(r=u=null),o}}function Re(n){if(!M(n))throw new TypeError;var e=r(arguments,1);return setTimeout(function(){n.apply(it,e)},1)}function $e(n,e){if(!M(n))throw new TypeError;var t=r(arguments,2);return setTimeout(function(){n.apply(it,t)},e)}function Ie(n,e){var t={};return function(){var r=e?e.apply(this,arguments):ut+arguments[0];return Mt.call(t,r)?t[r]:t[r]=n.apply(this,arguments)}}function Le(n){var e,t;if(!M(n))throw new TypeError;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}}function Fe(n){return b(n,16,r(arguments,1))}function qe(n,e,t){var r=!0,i=!0;if(!M(n))throw new TypeError;return t===!1?r=!1:R(t)&&(r="leading"in t?t.leading:r,i="trailing"in t?t.trailing:i),t={},t.leading=r,t.maxWait=e,t.trailing=i,Me(n,e,t)}function He(n,e){return b(e,16,[n])}function Ve(n,e,t){var r=typeof n;if(null==n||"function"==r)return c(n,e,t);if("object"!=r)return We(n);var i=Yt(n);return function(e){for(var t=i.length,r=!1;t--&&(r=e[i[t]]===n[i[t]]););return r}}function Pe(n){return null==n?"":String(n).replace(Xt,v)}function ze(n){return n}function Je(n){K(E(n),function(e){var t=i[e]=n[e];i.prototype[e]=function(){var n=[this.__wrapped__];Rt.apply(n,arguments);var e=t.apply(i,n);return this.__chain__?new o(e,!0):e}})}function Ue(){return xt._=At,this}function We(n){return function(e){return e[n]}}function Ye(n,e){return null==n&&null==e&&(e=1),n=+n||0,null==e?(e=n,n=0):e=+e||0,n+Bt(zt()*(e-n+1))}function Ge(n,e){if(n){var t=n[e];return M(t)?n[e]():t}}function Qe(n,e,r){var o=i,a=o.templateSettings;n=String(n||""),r=T({},r,a);var u=0,c="__p += '",s=r.variable,f=RegExp((r.escape||st).source+"|"+(r.interpolate||st).source+"|"+(r.evaluate||st).source+"|$","g");n.replace(f,function(e,r,i,o,a){return c+=n.slice(u,a).replace(ft,t),r&&(c+="' +\n_.escape("+r+") +\n'"),o&&(c+="';\n"+o+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=a+e.length,e}),c+="';\n",s||(s="obj",c="with ("+s+" || {}) {\n"+c+"\n}\n"),c="function("+s+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+c+"return __p\n}";try{var l=Function("_","return "+c)(o)}catch(p){throw p.source=c,p}return e?l(e):(l.source=c,l)}function Ke(n,e,t){n=(n=+n)>-1?n:0;var r=-1,i=Array(n);for(e=c(e,t,1);++r<n;)i[r]=e(r);return i}function Xe(n){return null==n?"":String(n).replace(Kt,w)}function Ze(n){var e=++ot+"";return n?n+e:e}function nt(n){return n=new o(n),n.__chain__=!0,n}function et(n,e){return e(n),n}function tt(){return this.__chain__=!0,this}function rt(){return this.__wrapped__}var it,ot=0,at={},ut=+new Date+"",ct=/<%=([\s\S]+?)%>/g,st=/($^)/,ft=/['\n\r\t\u2028\u2029\\]/g,lt="[object Arguments]",pt="[object Array]",ht="[object Boolean]",dt="[object Date]",gt="[object Function]",bt="[object Number]",vt="[object Object]",mt="[object RegExp]",yt="[object String]",wt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},_t={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},xt=wt[typeof window]&&window||this,kt=wt[typeof exports]&&exports&&!exports.nodeType&&exports,Tt=wt[typeof module]&&module&&!module.nodeType&&module,Et=Tt&&Tt.exports===kt&&kt,Nt=wt[typeof global]&&global;!Nt||Nt.global!==Nt&&Nt.window!==Nt||(xt=Nt);var Ct=[],St=Object.prototype,At=xt._,jt=St.toString,Dt=RegExp("^"+String(jt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Ot=Math.ceil,Bt=Math.floor,Mt=St.hasOwnProperty,Rt=Ct.push,$t=St.propertyIsEnumerable,It=y(It=Object.create)&&It,Lt=y(Lt=Array.isArray)&&Lt,Ft=xt.isFinite,qt=xt.isNaN,Ht=y(Ht=Object.keys)&&Ht,Vt=Math.max,Pt=Math.min,zt=Math.random;o.prototype=i.prototype;var Jt={};(function(){var n={0:1,length:1};Jt.spliceObjects=(Ct.splice.call(n,0,1),!n[0])})(1),i.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ct,variable:""},It||(u=function(){function n(){}return function(e){if(R(e)){n.prototype=e;var t=new n;n.prototype=null}return t||xt.Object()}}()),_(arguments)||(_=function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Mt.call(n,"callee")&&!$t.call(n,"callee")||!1
});var Ut=Lt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&jt.call(n)==pt||!1},Wt=function(n){var e,t=n,r=[];if(!t)return r;if(!wt[typeof n])return r;for(e in t)Mt.call(t,e)&&r.push(e);return r},Yt=Ht?function(n){return R(n)?Ht(n):[]}:Wt,Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Qt=C(Gt),Kt=RegExp("("+Yt(Qt).join("|")+")","g"),Xt=RegExp("["+Yt(Gt).join("")+"]","g"),Zt=function(n,e){var t,r=n,i=r;if(!r)return i;if(!wt[typeof r])return i;for(t in r)if(e(r[t],t,n)===at)return i;return i},nr=function(n,e){var t,r=n,i=r;if(!r)return i;if(!wt[typeof r])return i;for(t in r)if(Mt.call(r,t)&&e(r[t],t,n)===at)return i;return i};M(/x/)&&(M=function(n){return"function"==typeof n&&jt.call(n)==gt});var er=g(function(n,e,t){Mt.call(n,t)?n[t]++:n[t]=1}),tr=g(function(n,e,t){(Mt.call(n,t)?n[t]:n[t]=[]).push(e)}),rr=g(function(n,e,t){n[t]=e}),ir=ne,or=y(or=Date.now)&&or||function(){return(new Date).getTime()};i.after=je,i.bind=De,i.bindAll=Oe,i.chain=nt,i.compact=he,i.compose=Be,i.countBy=er,i.debounce=Me,i.defaults=T,i.defer=Re,i.delay=$e,i.difference=de,i.filter=Y,i.flatten=be,i.forEach=K,i.functions=E,i.groupBy=tr,i.indexBy=rr,i.initial=me,i.intersection=ye,i.invert=C,i.invoke=Z,i.keys=Yt,i.map=ne,i.max=ee,i.memoize=Ie,i.min=te,i.omit=V,i.once=Le,i.pairs=P,i.partial=Fe,i.pick=z,i.pluck=ir,i.range=xe,i.reject=oe,i.rest=ke,i.shuffle=ue,i.sortBy=fe,i.tap=et,i.throttle=qe,i.times=Ke,i.toArray=le,i.union=Ee,i.uniq=Ne,i.values=J,i.where=pe,i.without=Ce,i.wrap=He,i.zip=Se,i.collect=ne,i.drop=ke,i.each=K,i.extend=x,i.methods=E,i.object=Ae,i.select=Y,i.tail=ke,i.unique=Ne,i.clone=k,i.contains=U,i.escape=Pe,i.every=W,i.find=G,i.has=N,i.identity=ze,i.indexOf=ve,i.isArguments=_,i.isArray=Ut,i.isBoolean=S,i.isDate=A,i.isElement=j,i.isEmpty=D,i.isEqual=O,i.isFinite=B,i.isFunction=M,i.isNaN=$,i.isNull=I,i.isNumber=L,i.isObject=R,i.isRegExp=F,i.isString=q,i.isUndefined=H,i.lastIndexOf=_e,i.mixin=Je,i.noConflict=Ue,i.random=Ye,i.reduce=re,i.reduceRight=ie,i.result=Ge,i.size=ce,i.some=se,i.sortedIndex=Te,i.template=Qe,i.unescape=Xe,i.uniqueId=Ze,i.all=W,i.any=se,i.detect=G,i.findWhere=Q,i.foldl=re,i.foldr=ie,i.include=U,i.inject=re,i.first=ge,i.last=we,i.sample=ae,i.take=ge,i.head=ge,Je(i),i.VERSION="2.4.1",i.prototype.chain=tt,i.prototype.value=rt,K(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=Ct[n];i.prototype[n]=function(){var n=this.__wrapped__;return e.apply(n,arguments),Jt.spliceObjects||0!==n.length||delete n[0],this}}),K(["concat","join","slice"],function(n){var e=Ct[n];i.prototype[n]=function(){var n=this.__wrapped__,t=e.apply(n,arguments);return this.__chain__&&(t=new o(t),t.__chain__=!0),t}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(xt._=i,define(function(){return i})):kt&&Tt?Et?(Tt.exports=i)._=i:kt._=i:xt._=i}.call(this),function(n,e){"object"==typeof module&&module.exports?module.exports=e(require("underscore")):"function"==typeof define&&define.amd?define(["underscore"],function(t){return e(t,n)}):n.riveter=e(n._,n)}(this,function(n){var e=Array.prototype.slice,t=function(){for(var n=e.call(arguments,0);n.length;)t.rivet(n.shift())};return t.rivet=function(n){n.hasOwnProperty("extend")||(n.extend=function(e,r){return t.extend(n,e,r)}),n.hasOwnProperty("compose")||(n.compose=function(){return t.compose.apply(this,[n].concat(e.call(arguments,0)))}),n.hasOwnProperty("inherits")||(n.inherits=function(e,r){t.inherits(n,e,r)}),n.hasOwnProperty("mixin")||(n.mixin=function(){t.mixin.apply(this,[n].concat(e.call(arguments,0)))})},t.inherits=function(e,r,i){var o,a=function(){},u=function(){r.apply(this,arguments)};return"object"==typeof e?(e.hasOwnProperty("constructor")&&(u=e.constructor),o=e):(u=e,o=e.prototype),t.rivet(u),n.defaults(u,r,i),a.prototype=r.prototype,u.prototype=new a,n.extend(u.prototype,o,{constructor:u}),u.__super=r,u.__super__=r.prototype,u},t.extend=function(n,e,r){return t.inherits(e,n,r)},t.compose=function(){var r=e.call(arguments,0),i=r.shift();t.rivet(i);var o=n.reduce(r,function(n,e){return e.hasOwnProperty("_preInit")&&n.preInit.push(e._preInit),e.hasOwnProperty("_postInit")&&n.postInit.push(e._postInit),e=e.mixin||e,n.items.push(e),n},{items:[],preInit:[],postInit:[]}),a=i.extend({constructor:function(){var t=e.call(arguments,0);n.each(o.preInit,function(n){n.apply(this,t)},this),i.prototype.constructor.apply(this,t),n.each(o.postInit,function(n){n.apply(this,t)},this)}});return t.rivet(a),n.defaults(a.prototype,n.extend.apply(null,[{}].concat(o.items))),a},t.mixin=function(){var r=e.call(arguments,0),i=r.shift();t.rivet(i),n.defaults(i.prototype,n.extend.apply(null,[{}].concat(r)))},t}),function(n,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e(n)):n.Conduit=e(n)}(this,function(){function n(n){if("function"!=typeof n.target)throw new Error("You can only make functions into Conduits.");var e={pre:n.pre||[],post:n.post||[],all:[]},t=n.context,r=n.target,i={isTarget:!0,fn:n.sync?function(){var n=Array.prototype.slice.call(arguments,0),e=r.apply(t,n);return e}:function(n){var e=Array.prototype.slice.call(arguments,1);e.splice(1,1,r.apply(t,e)),n.apply(this,e)}},o=function(){e.all=e.pre.concat([i].concat(e.post))};o();var a=function(){var r,i,o=0,a=function u(){var a,c,s=Array.prototype.slice.call(arguments,0),f=o;o+=1,f<e.all.length&&(a=e.all[f],i="target"===i?"after":a.isTarget?"target":"before",n.sync?"before"===i?(c=a.fn.apply(a.context||t,s),u.apply(this,c||s)):(r=a.fn.apply(a.context||t,s)||r,u.apply(this,[r].concat(s))):a.fn.apply(a.context||t,[u].concat(s)))};return a.apply(this,arguments),r};return a.steps=function(){return e.all},a.context=function(n){return 0===arguments.length?t:void(t=n)},a.before=function(n,t){n="function"==typeof n?{fn:n}:n,t=t||{},t.prepend?e.pre.unshift(n):e.pre.push(n),o()},a.after=function(n,t){n="function"==typeof n?{fn:n}:n,t=t||{},t.prepend?e.post.unshift(n):e.post.push(n),o()},a.clear=function(){e={pre:[],post:[],all:[]},o()},a.target=function(n){return n&&(r=n),r},a}return{Sync:function(e){return e.sync=!0,n.call(this,e)},Async:function(e){return n.call(this,e)}}}),function(n,e){"object"==typeof module&&module.exports?module.exports=e(require("lodash"),require("conduitjs"),this):"function"==typeof define&&define.amd?define(["lodash","conduitjs"],function(t,r){return e(t,r,n)}):n.postal=e(n._,n.Conduit,n)}(this,function(n,e,t){function r(){for(;y.length;)s.unsubscribe(y.shift())}function i(n,e){return{channel:s.configuration.SYSTEM_CHANNEL,topic:"subscription."+n,data:{event:"subscription."+n,channel:e.channel,topic:e.topic}}}function o(e){return"function"==typeof e?e:e?function(t){var r=0,i=0;return n.each(e,function(n,o){r+=1,("topic"===o&&s.configuration.resolver.compare(t.topic,e.topic)||"context"===o&&e.context===(t.callback.context&&t.callback.context()||t.context)||t[o]===e[o])&&(i+=1)}),r===i}:function(){return!0}}function a(n){var e,t=new p(n.channel||this.configuration.DEFAULT_CHANNEL,n.topic,n.callback),r=this.subscriptions[t.channel];return r||(r=this.subscriptions[t.channel]={}),e=this.subscriptions[t.channel][t.topic],e||(e=this.subscriptions[t.channel][t.topic]=[]),e.push(t),t}function u(e){++m,e.channel=e.channel||this.configuration.DEFAULT_CHANNEL,e.timeStamp=new Date,n.each(this.wireTaps,function(n){n(e.data,e)}),this.subscriptions[e.channel]&&n.each(this.subscriptions[e.channel],function(n){for(var t,r=0,i=n.length;i>r;)(t=n[r++])&&v(t,e)}),0===--m&&r()}function c(){for(var n,e=0,t=Array.prototype.slice.call(arguments,0);n=t.shift();){if(m)return void y.push(n);if(this.subscriptions[n.channel]&&this.subscriptions[n.channel][n.topic]){var r=this.subscriptions[n.channel][n.topic].length;for(e=0;r>e;){if(this.subscriptions[n.channel][n.topic][e]===n){this.subscriptions[n.channel][n.topic].splice(e,1);break}e+=1}}s.publish(i("removed",n))}}var s,f=t.postal,l=function(n){this.channel=n||s.configuration.DEFAULT_CHANNEL,this.initialize()};l.prototype.initialize=function(){var n=this.publish;this.publish=new e.Async({target:n,context:this})},l.prototype.subscribe=function(){return s.subscribe({channel:this.channel,topic:1===arguments.length?arguments[0].topic:arguments[0],callback:1===arguments.length?arguments[0].callback:arguments[1]})},l.prototype.publish=function(){var n=1===arguments.length?"[object String]"===Object.prototype.toString.call(arguments[0])?{topic:arguments[0]}:arguments[0]:{topic:arguments[0],data:arguments[1]};n.channel=this.channel,s.publish(n)};var p=function(n,e,t){if(3!==arguments.length)throw new Error("You must provide a channel, topic and callback when creating a SubscriptionDefinition instance.");if(0===e.length)throw new Error("Topics cannot be empty");this.channel=n,this.topic=e,this.subscribe(t)},h=function(){var e;return function(t){var r=!1;return n.isString(t)?(r=t===e,e=t):(r=n.isEqual(t,e),e=n.clone(t)),!r}},d=function(){var e=[];return function(t){var r=!n.any(e,function(e){return n.isObject(t)||n.isArray(t)?n.isEqual(t,e):t===e});return r&&e.push(t),r}},g={withDelay:function(e){if(n.isNaN(e))throw"Milliseconds must be a number";return{name:"withDelay",fn:function(n,t,r){setTimeout(function(){n(t,r)},e)}}},defer:function(){return this.withDelay(0)},stopAfter:function(e,t){if(n.isNaN(e)||0>=e)throw"The value provided to disposeAfter (maxCalls) must be a number greater than zero.";var r=n.after(e,t);return{name:"stopAfter",fn:function(n,e,t){r(),n(e,t)}}},withThrottle:function(e){if(n.isNaN(e))throw"Milliseconds must be a number";return{name:"withThrottle",fn:n.throttle(function(n,e,t){n(e,t)},e)}},withDebounce:function(e,t){if(n.isNaN(e))throw"Milliseconds must be a number";return{name:"debounce",fn:n.debounce(function(n,e,t){n(e,t)},e,!!t)}},withConstraint:function(e){if(!n.isFunction(e))throw"Predicate constraint must be a function";return{name:"withConstraint",fn:function(n,t,r){e.call(this,t,r)&&n.call(this,t,r)}}},distinct:function(n){n=n||{};var e=function(n){return n[0]},t=n.all?new d(e):new h(e);return{name:"distinct",fn:function(n,e,r){t(e)&&n(e,r)}}}};p.prototype={after:function(){return this.callback.after.apply(this,arguments),this},before:function(){return this.callback.before.apply(this,arguments),this},"catch":function(n){var e=this.callback.target(),t=function(){try{e.apply(this,arguments)}catch(t){n(t,arguments[0])}};return this.callback.target(t),this},defer:function(){return this.callback.before(g.defer()),this},disposeAfter:function(n){var e=this;return e.callback.before(g.stopAfter(n,function(){e.unsubscribe.call(e)})),e},distinctUntilChanged:function(){return this.callback.before(g.distinct()),this},distinct:function(){return this.callback.before(g.distinct({all:!0})),this},logError:function(){if(console){var n;n=console.warn?console.warn:console.log,this.catch(n)}return this},once:function(){return this.disposeAfter(1),this},subscribe:function(n){return this.callback=new e.Async({target:n,context:this}),this},unsubscribe:function(){this.inactive||(this.inactive=!0,s.unsubscribe(this))},withConstraint:function(n){return this.callback.before(g.withConstraint(n)),this},withConstraints:function(n){for(;n.length;)this.callback.before(g.withConstraint(n.shift()));return this},withDebounce:function(n,e){return this.callback.before(g.withDebounce(n,e)),this},withDelay:function(n){return this.callback.before(g.withDelay(n)),this},withThrottle:function(n){return this.callback.before(g.withThrottle(n)),this},withContext:function(n){return this.callback.context(n),this}};var b={cache:{},regex:{},compare:function(e,t){var r,i,o,a=this.cache[t]&&this.cache[t][e];return"undefined"!=typeof a?a:((i=this.regex[e])||(r="^"+n.map(e.split("."),function(n){var e="";return o&&(e="#"!==o?"\\.\\b":"\\b"),e+="#"===n?"[\\s\\S]*":"*"===n?"[^.]+":n,o=n,e}).join("")+"$",i=this.regex[e]=new RegExp(r)),this.cache[t]=this.cache[t]||{},this.cache[t][e]=a=i.test(t),a)},reset:function(){this.cache={},this.regex={}}},v=function(n,e){!n.inactive&&s.configuration.resolver.compare(n.topic,e.topic)&&n.callback(e.data,e)},m=0,y=[];if(s={configuration:{resolver:b,DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal"},subscriptions:{},wireTaps:[],ChannelDefinition:l,SubscriptionDefinition:p,channel:function(n){return new l(n)},addWireTap:function(n){var e=this;return e.wireTaps.push(n),function(){var t=e.wireTaps.indexOf(n);-1!==t&&e.wireTaps.splice(t,1)}},noConflict:function(){if("undefined"==typeof window||"undefined"!=typeof window&&"function"==typeof define&&define.amd)throw new Error("noConflict can only be used in browser clients which aren't using AMD modules");return t.postal=f,this},getSubscribersFor:function(e){var t=[];return n.each(this.subscriptions,function(r){n.each(r,function(r){t=t.concat(n.filter(r,o(e)))})}),t},reset:function(){this.unsubscribeFor(),this.configuration.resolver.reset(),this.subscriptions={}},unsubscribeFor:function(n){var e=[];this.subscriptions&&(e=this.getSubscribersFor(n),this.unsubscribe.apply(this,e))}},s.subscribe=new e.Sync({target:a,context:s}),s.publish=e.Async({target:u,context:s}),s.unsubscribe=new e.Sync({target:c,context:s}),s.subscribe.after(function(n){s.publish(i("created",n))}),s.subscriptions[s.configuration.SYSTEM_CHANNEL]={},s.linkChannels=function(e,t){var r=[],i=this;return e=n.isArray(e)?e:[e],t=n.isArray(t)?t:[t],n.each(e,function(e){var o=e.topic||"#";n.each(t,function(t){var a=t.channel||i.configuration.DEFAULT_CHANNEL;r.push(i.subscribe({channel:e.channel||i.configuration.DEFAULT_CHANNEL,topic:o,callback:function(e,r){var o=n.clone(r);o.topic=n.isFunction(t.topic)?t.topic(r.topic):t.topic||r.topic,o.channel=a,o.data=e,i.publish(o)}}))})}),r},t&&Object.prototype.hasOwnProperty.call(t,"__postalReady__")&&n.isArray(t.__postalReady__))for(;t.__postalReady__.length;)t.__postalReady__.shift().onReady(s);return s});var e=ko.applyBindings;ko.applyBindings=function(n,t){e(n,t),"function"==typeof n.startup&&void 0!==n._options&&(n._options.startup!==!1&&n.startup(),"function"==typeof n._modelOptions.afterBinding&&n._modelOptions.afterBinding.call(n))},ko.bindingHandlers.registerElement={preprocess:function(n){return"'"+n+"'"},init:function(n,e,t,r){var i=ko.unwrap(e()),o={name:n.getAttribute("id")||n.getAttribute("name"),context:"relative"};"string"==typeof i?i=_.extend(o,{name:i}):"object"==typeof i&&(i=_.extend(o,i)),"object"!=typeof r.el&&(r.el={}),r.el[i.name]=n}},ko.bindingHandlers["class"]={update:function(e,t){e.__ko__previousClassValue__&&n.removeClass(e,e.__ko__previousClassValue__);var r=ko.utils.unwrapObservable(t());void 0!==r&&n.addClass(e,r),e.__ko__previousClassValue__=r}},ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},ko.extenders.throttle=function(n,e){"number"==typeof e&&(e={timeout:e,when:function(){return!0}}),n.throttleEvaluation=e.timeout;var t=null,r=ko.dependentObservable({read:n,write:function(r){e.when(r)?(clearTimeout(t),t=setTimeout(function(){n(r)},e.timeout)):(clearTimeout(t),n(r))}});return r.force=function(e){clearTimeout(t),n(e)},r},ko.extenders.autoDisable=function(n,e){return n.extend({delayTrigger:{delay:e||0,trigger:function(n){n(!1)}}})},ko.extenders.autoEnable=function(n,e){return n.extend({delayTrigger:{delay:e||0,trigger:function(n){n(!0)}}})},ko.extenders.delayTrigger=function(n,e){var t,r=300,i=function(){};"object"==typeof e?(r=!isNaN(e.delay)&&parseInt(e.delay,10)||r,i=e.trigger||i):r=!isNaN(e)&&parseInt(e,10)||r;var o=function(){clearTimeout(t),t=void 0},a=ko.computed({read:n,write:function(r){n(r),void 0!==t&&o(),t=setTimeout(function(){i(n,e)}.bind(n),a.triggerDelay)}});return a.clearTrigger=o,a.triggerDelay=r,a},ko.extenders.delayWrite=function(n,e){var t,r=300;return"object"==typeof e?(r=!isNaN(e.delay)&&parseInt(e.delay,10)||r,t=e.filter||function(){return!0}):r=!isNaN(e)&&parseInt(e,10)||r,ko.computed({read:n,write:function(e){t(e)?(n._delayWriteTimer&&clearTimeout(this._delayWriteTimer),n._delayWriteTimer=setTimeout(function(){n(e)},r)):n(e)}})},ko.subscribable.fn.receiveFrom=function(n,e){var t,r=this,i=this;if(_.isObject(n)===!0&&void 0!==n.channel)t=n;else{if("string"!=typeof n)throw"Invalid namespace ["+typeof n+"]";t=postal.channel(n)}return i=ko.computed({read:r,write:function(n){t.publish("change."+e,n)}}),i.refresh=function(){t.publish("refresh."+e)},t.subscribe(e,function(n){r(n)}),i.__isReceived=!0,i},ko.subscribable.fn.broadcastAs=function(n,e){var t,r=this;return e=_.isObject(n)===!0?n:"boolean"==typeof e?{name:n,writable:e}:_.isObject(e)===!0?_.extend({name:n},e):{name:n},t=e.namespace||ko.currentNamespace(),e.writable&&t.subscribe("change."+e.name,function(n){r(n)}),t.subscribe("refresh."+e.name,function(){t.publish(e.name,r())}),r.subscribe(function(n){t.publish(e.name,n)}),r.__isBroadcast=!0,r},ko.__nsStack=[],ko.namespace=function(n){return postal.channel(n)},ko.currentNamespace=function(){return ko.namespace(ko.__nsStack[0])},ko.enterNamespace=function(n){ko.__nsStack.unshift(n)},ko.exitNamespace=function(){ko.__nsStack.shift()},ko.modelCount=function(){var n=_.reduce(o,function(n,e,t){return n[t]=e+1,n},{});return n.__total=_.reduce(_.values(n),function(n,e){return n+e},0),n},ko.getModels=function(){return t},ko.debugModels=function(n){i=n},ko.refreshModels=function(){_.invoke(ko.getModels(),"refreshReceived")};var t={},r=0,i=!1,o={},a=function(n,e){return void 0===o[n]?o[n]=0:o[n]++,n+(e===!0&&o[n]>0?o[n]:"")};return ko.model=function(n){n=_.extend({namespace:void 0,autoIncrement:!1,mixins:void 0,params:void 0,afterBinding:function(){},factory:function(){}},n);var e={_preInit:function(e){n.namespace=a(n.namespace,n.autoIncrement),this._modelOptions=n,ko.enterNamespace(n.namespace),this._options=_.extend({namespace:n.namespace||"namespace"+r},e),r++,this.namespace=ko.namespace(this.namespace=this._options.namespace),"/"!==ko.currentNamespace().channel&&(this.namespace=ko.currentNamespace()),this._globalChannel=ko.namespace()},mixin:{namespaceName:n.namespace,broadcastAll:function(){var n=this;return"object"==typeof this._broadcast&&_.each(this._broadcast,function(e,t){n.namespace.publish(t,e())}),_.each(this,function(e,t){_.isObject(e)===!0&&e.__isBroadcast===!0&&n.namespace.publish(t,e())}),this},refreshReceived:function(){return"object"==typeof this._receive&&void 0!==this._receive.refresh&&(_.invoke(this._receive,"refresh"),"object"==typeof this._receive.config&&_.invoke(this._receive.config,"refresh")),_.each(this,function(n){_.isObject(n)===!0&&n.__isReceived===!0&&n.refresh()}),_.isObject(this.config)===!0&&_.invoke(this.config,"refresh"),this},startup:function(){return this.refreshReceived().broadcastAll(),this}},_postInit:function(){i===!0&&(t[ko.currentNamespace().channel]=this),ko.exitNamespace(),this.startup(),"function"==typeof this._modelOptions.afterCreating&&this._modelOptions.afterCreating.call(this)}},o=[n.factory,e];return void 0!==n.mixins&&(o=o.concat(n.mixins)),riveter.compose.apply(void 0,o)},ko});