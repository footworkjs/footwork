/**, * footwork.js - A solid footing for larger knockout applications., * Author: Jonathan Newman (http://staticty.pe), * Version: v0.2.0, * Url: http://footworkjs.com, * License(s): MIT, */,,(function(t,e){"function"==typeof define&&define.amd?define(["lodash","knockout"],e):"object"==typeof exports?module.exports=e(require("lodash"),require("knockout")):t.ko=e(_,ko)})(this,function(_,ko){var windowObject=window;return function(){var root={},window=root,define=void 0,module=void 0,exports=void 0,global=void 0;_.extend(root,{_:_,ko:ko}),function(){(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e:t.Apollo=e()})(this,function(){"use strict";var t,e,n,r,o={},i=function(t,e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=t.split(" "));for(var n=0;n<t.length;n++)e(t[n],n)};return document.documentElement.classList?(t=function(t,e){return t.classList.contains(e)},e=function(t,e){t.classList.add(e)},n=function(t,e){t.classList.remove(e)},r=function(t,e){t.classList.toggle(e)}):(t=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},e=function(t,e){o.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},n=function(t,e){o.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)*"+e+"(\\s|$)*","g"),""))},r=function(t,e){var n=o.hasClass(t,e)?o.removeClass:o.addClass;n(t,e)}),o.hasClass=function(e,n){return t(e,n)},o.addClass=function(t,n){i(n,function(n){e(t,n)})},o.removeClass=function(t,e){i(e,function(e){n(t,e)})},o.toggleClass=function(t,e){i(e,function(e){r(t,e)})},o})}.call(root),function(){(function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],function(n){return e(n,t)}):t.riveter=e(t._,t)})(this,function(t){var e=Array.prototype.slice,n=function(){for(var t=e.call(arguments,0);t.length;)n.rivet(t.shift())};return n.rivet=function(t){t.hasOwnProperty("extend")||(t.extend=function(e,r){return n.extend(t,e,r)}),t.hasOwnProperty("compose")||(t.compose=function(){return n.compose.apply(this,[t].concat(e.call(arguments,0)))}),t.hasOwnProperty("inherits")||(t.inherits=function(e,r){n.inherits(t,e,r)}),t.hasOwnProperty("mixin")||(t.mixin=function(){n.mixin.apply(this,[t].concat(e.call(arguments,0)))})},n.inherits=function(e,r,o){var i,a=function(){},s=function(){r.apply(this,arguments)};return"object"==typeof e?(e.hasOwnProperty("constructor")&&(s=e.constructor),i=e):(s=e,i=e.prototype),n.rivet(s),t.defaults(s,r,o),a.prototype=r.prototype,s.prototype=new a,t.extend(s.prototype,i,{constructor:s}),s.__super=r,s.__super__=r.prototype,s},n.extend=function(t,e,r){return n.inherits(e,t,r)},n.compose=function(){var r=e.call(arguments,0),o=r.shift();n.rivet(o);var i=t.reduce(r,function(t,e){return e.hasOwnProperty("_preInit")&&t.preInit.push(e._preInit),e.hasOwnProperty("_postInit")&&t.postInit.push(e._postInit),e=e.mixin||e,t.items.push(e),t},{items:[],preInit:[],postInit:[]}),a=o.extend({constructor:function(){var n=e.call(arguments,0);t.each(i.preInit,function(t){t.apply(this,n)},this),o.prototype.constructor.apply(this,n),t.each(i.postInit,function(t){t.apply(this,n)},this)}});return n.rivet(a),t.defaults(a.prototype,t.extend.apply(null,[{}].concat(i.items))),a},n.mixin=function(){var r=e.call(arguments,0),o=r.shift();n.rivet(o),t.defaults(o.prototype,t.extend.apply(null,[{}].concat(r)))},n})}.call(root),function(){(function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e(t)):t.Conduit=e(t)})(this,function(){function t(t){if("function"!=typeof t.target)throw new Error("You can only make functions into Conduits.");var e={pre:t.pre||[],post:t.post||[],all:[]},n=t.context,r=t.target,o={isTarget:!0,fn:t.sync?function(){var t=Array.prototype.slice.call(arguments,0),e=r.apply(n,t);return e}:function(t){var e=Array.prototype.slice.call(arguments,1);e.splice(1,1,r.apply(n,e)),t.apply(this,e)}},i=function(){e.all=e.pre.concat([o].concat(e.post))};i();var a=function(){var r,o,i=0,a=function s(){var a,u,c=Array.prototype.slice.call(arguments,0),l=i;i+=1,l<e.all.length&&(a=e.all[l],o="target"===o?"after":a.isTarget?"target":"before",t.sync?"before"===o?(u=a.fn.apply(a.context||n,c),s.apply(this,u||c)):(r=a.fn.apply(a.context||n,c)||r,s.apply(this,[r].concat(c))):a.fn.apply(a.context||n,[s].concat(c)))};return a.apply(this,arguments),r};return a.steps=function(){return e.all},a.context=function(t){return 0===arguments.length?n:void(n=t)},a.before=function(t,n){t="function"==typeof t?{fn:t}:t,n=n||{},n.prepend?e.pre.unshift(t):e.pre.push(t),i()},a.after=function(t,n){t="function"==typeof t?{fn:t}:t,n=n||{},n.prepend?e.post.unshift(t):e.post.push(t),i()},a.clear=function(){e={pre:[],post:[],all:[]},i()},a.target=function(t){return t&&(r=t),r},a}return{Sync:function(e){return e.sync=!0,t.call(this,e)},Async:function(e){return t.call(this,e)}}})}.call(root),function(){(function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("lodash"),require("conduitjs"),this):"function"==typeof define&&define.amd?define(["lodash","conduitjs"],function(n,r){return e(n,r,t)}):t.postal=e(t._,t.Conduit,t)})(this,function(t,e,n){function r(){for(;b.length;)c.unsubscribe(b.shift())}function o(t,e){return{channel:c.configuration.SYSTEM_CHANNEL,topic:"subscription."+t,data:{event:"subscription."+t,channel:e.channel,topic:e.topic}}}function i(e){return"function"==typeof e?e:e?function(n){var r=0,o=0;return t.each(e,function(t,i){r+=1,("topic"===i&&c.configuration.resolver.compare(n.topic,e.topic)||"context"===i&&e.context===(n.callback.context&&n.callback.context()||n.context)||n[i]===e[i])&&(o+=1)}),r===o}:function(){return!0}}function a(t){var e,n=new p(t.channel||this.configuration.DEFAULT_CHANNEL,t.topic,t.callback),r=this.subscriptions[n.channel];return r||(r=this.subscriptions[n.channel]={}),e=this.subscriptions[n.channel][n.topic],e||(e=this.subscriptions[n.channel][n.topic]=[]),e.push(n),n}function s(e){++v,e.channel=e.channel||this.configuration.DEFAULT_CHANNEL,e.timeStamp=new Date,t.each(this.wireTaps,function(t){t(e.data,e)}),this.subscriptions[e.channel]&&t.each(this.subscriptions[e.channel],function(t){for(var n,r=0,o=t.length;o>r;)(n=t[r++])&&m(n,e)}),0===--v&&r()}function u(){for(var t,e=0,n=Array.prototype.slice.call(arguments,0);t=n.shift();){if(v)return void b.push(t);if(this.subscriptions[t.channel]&&this.subscriptions[t.channel][t.topic]){var r=this.subscriptions[t.channel][t.topic].length;for(e=0;r>e;){if(this.subscriptions[t.channel][t.topic][e]===t){this.subscriptions[t.channel][t.topic].splice(e,1);break}e+=1}}c.publish(o("removed",t))}}var c,l=n.postal,f=function(t){this.channel=t||c.configuration.DEFAULT_CHANNEL,this.initialize()};f.prototype.initialize=function(){var t=this.publish;this.publish=new e.Async({target:t,context:this})},f.prototype.subscribe=function(){return c.subscribe({channel:this.channel,topic:1===arguments.length?arguments[0].topic:arguments[0],callback:1===arguments.length?arguments[0].callback:arguments[1]})},f.prototype.publish=function(){var t=1===arguments.length?"[object String]"===Object.prototype.toString.call(arguments[0])?{topic:arguments[0]}:arguments[0]:{topic:arguments[0],data:arguments[1]};t.channel=this.channel,c.publish(t)};var p=function(t,e,n){if(3!==arguments.length)throw new Error("You must provide a channel, topic and callback when creating a SubscriptionDefinition instance.");if(0===e.length)throw new Error("Topics cannot be empty");this.channel=t,this.topic=e,this.subscribe(n)},d=function(){var e;return function(n){var r=!1;return t.isString(n)?(r=n===e,e=n):(r=t.isEqual(n,e),e=t.clone(n)),!r}},h=function(){var e=[];return function(n){var r=!t.any(e,function(e){return t.isObject(n)||t.isArray(n)?t.isEqual(n,e):n===e});return r&&e.push(n),r}},g={withDelay:function(e){if(t.isNaN(e))throw"Milliseconds must be a number";return{name:"withDelay",fn:function(t,n,r){setTimeout(function(){t(n,r)},e)}}},defer:function(){return this.withDelay(0)},stopAfter:function(e,n){if(t.isNaN(e)||0>=e)throw"The value provided to disposeAfter (maxCalls) must be a number greater than zero.";var r=t.after(e,n);return{name:"stopAfter",fn:function(t,e,n){r(),t(e,n)}}},withThrottle:function(e){if(t.isNaN(e))throw"Milliseconds must be a number";return{name:"withThrottle",fn:t.throttle(function(t,e,n){t(e,n)},e)}},withDebounce:function(e,n){if(t.isNaN(e))throw"Milliseconds must be a number";return{name:"debounce",fn:t.debounce(function(t,e,n){t(e,n)},e,!!n)}},withConstraint:function(e){if(!t.isFunction(e))throw"Predicate constraint must be a function";return{name:"withConstraint",fn:function(t,n,r){e.call(this,n,r)&&t.call(this,n,r)}}},distinct:function(t){t=t||{};var e=function(t){return t[0]},n=t.all?new h(e):new d(e);return{name:"distinct",fn:function(t,e,r){n(e)&&t(e,r)}}}};p.prototype={after:function(){return this.callback.after.apply(this,arguments),this},before:function(){return this.callback.before.apply(this,arguments),this},"catch":function(t){var e=this.callback.target(),n=function(){try{e.apply(this,arguments)}catch(n){t(n,arguments[0])}};return this.callback.target(n),this},defer:function(){return this.callback.before(g.defer()),this},disposeAfter:function(t){var e=this;return e.callback.before(g.stopAfter(t,function(){e.unsubscribe.call(e)})),e},distinctUntilChanged:function(){return this.callback.before(g.distinct()),this},distinct:function(){return this.callback.before(g.distinct({all:!0})),this},logError:function(){if(console){var t;t=console.warn?console.warn:console.log,this.catch(t)}return this},once:function(){return this.disposeAfter(1),this},subscribe:function(t){return this.callback=new e.Async({target:t,context:this}),this},unsubscribe:function(){this.inactive||(this.inactive=!0,c.unsubscribe(this))},withConstraint:function(t){return this.callback.before(g.withConstraint(t)),this},withConstraints:function(t){for(;t.length;)this.callback.before(g.withConstraint(t.shift()));return this},withDebounce:function(t,e){return this.callback.before(g.withDebounce(t,e)),this},withDelay:function(t){return this.callback.before(g.withDelay(t)),this},withThrottle:function(t){return this.callback.before(g.withThrottle(t)),this},withContext:function(t){return this.callback.context(t),this}};var y={cache:{},regex:{},compare:function(e,n){var r,o,i,a=this.cache[n]&&this.cache[n][e];return"undefined"!=typeof a?a:((o=this.regex[e])||(r="^"+t.map(e.split("."),function(t){var e="";return i&&(e="#"!==i?"\\.\\b":"\\b"),e+="#"===t?"[\\s\\S]*":"*"===t?"[^.]+":t,i=t,e}).join("")+"$",o=this.regex[e]=new RegExp(r)),this.cache[n]=this.cache[n]||{},this.cache[n][e]=a=o.test(n),a)},reset:function(){this.cache={},this.regex={}}},m=function(t,e){!t.inactive&&c.configuration.resolver.compare(t.topic,e.topic)&&t.callback(e.data,e)},v=0,b=[];if(c={configuration:{resolver:y,DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal"},subscriptions:{},wireTaps:[],ChannelDefinition:f,SubscriptionDefinition:p,channel:function(t){return new f(t)},addWireTap:function(t){var e=this;return e.wireTaps.push(t),function(){var n=e.wireTaps.indexOf(t);-1!==n&&e.wireTaps.splice(n,1)}},noConflict:function(){if("undefined"==typeof window||"undefined"!=typeof window&&"function"==typeof define&&define.amd)throw new Error("noConflict can only be used in browser clients which aren't using AMD modules");return n.postal=l,this},getSubscribersFor:function(e){var n=[];return t.each(this.subscriptions,function(r){t.each(r,function(r){n=n.concat(t.filter(r,i(e)))})}),n},reset:function(){this.unsubscribeFor(),this.configuration.resolver.reset(),this.subscriptions={}},unsubscribeFor:function(t){var e=[];this.subscriptions&&(e=this.getSubscribersFor(t),this.unsubscribe.apply(this,e))}},c.subscribe=new e.Sync({target:a,context:c}),c.publish=e.Async({target:s,context:c}),c.unsubscribe=new e.Sync({target:u,context:c}),c.subscribe.after(function(t){c.publish(o("created",t))}),c.subscriptions[c.configuration.SYSTEM_CHANNEL]={},c.linkChannels=function(e,n){var r=[],o=this;return e=t.isArray(e)?e:[e],n=t.isArray(n)?n:[n],t.each(e,function(e){var i=e.topic||"#";t.each(n,function(n){var a=n.channel||o.configuration.DEFAULT_CHANNEL;r.push(o.subscribe({channel:e.channel||o.configuration.DEFAULT_CHANNEL,topic:i,callback:function(e,r){var i=t.clone(r);i.topic=t.isFunction(n.topic)?n.topic(r.topic):n.topic||r.topic,i.channel=a,i.data=e,o.publish(i)}}))})}),r},n&&Object.prototype.hasOwnProperty.call(n,"__postalReady__")&&t.isArray(n.__postalReady__))for(;n.__postalReady__.length;)n.__postalReady__.shift().onReady(c);return c})}.call(root),function(window){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,i,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var n=t.History=t.History||{};if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(t){return t._uid||(t._uid=n.Adapter._uid++)},bind:function(t,e,r){var o=n.Adapter.uid(t);n.Adapter.handlers[o]=n.Adapter.handlers[o]||{},n.Adapter.handlers[o][e]=n.Adapter.handlers[o][e]||[],n.Adapter.handlers[o][e].push(r),t["on"+e]=function(t,e){return function(r){n.Adapter.trigger(t,e,r)}}(t,e)},trigger:function(t,e,r){r=r||{};var o,i,a=n.Adapter.uid(t);for(n.Adapter.handlers[a]=n.Adapter.handlers[a]||{},n.Adapter.handlers[a][e]=n.Adapter.handlers[a][e]||[],o=0,i=n.Adapter.handlers[a][e].length;i>o;++o)n.Adapter.handlers[a][e][o].apply(this,[r])},extractEventData:function(t,n){var r=n&&n[t]||e;return r},onDomLoad:function(e){var n=t.setTimeout(function(){e()},2e3);t.onload=function(){clearTimeout(n),e()}}},"undefined"!=typeof n.init&&n.init()}(window),function(t){"use strict";var e=t.document,n=t.setTimeout||n,r=t.clearTimeout||r,o=t.setInterval||o,i=t.History=t.History||{};if("undefined"!=typeof i.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");i.initHtml4=function(){return"undefined"!=typeof i.initHtml4.initialized?!1:(i.initHtml4.initialized=!0,i.enabled=!0,i.savedHashes=[],i.isLastHash=function(t){var e,n=i.getHashByIndex();return e=t===n},i.isHashEqual=function(t,e){return t=encodeURIComponent(t).replace(/%25/g,"%"),e=encodeURIComponent(e).replace(/%25/g,"%"),t===e},i.saveHash=function(t){return i.isLastHash(t)?!1:(i.savedHashes.push(t),!0)},i.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?i.savedHashes[i.savedHashes.length-1]:0>t?i.savedHashes[i.savedHashes.length+t]:i.savedHashes[t]},i.discardedHashes={},i.discardedStates={},i.discardState=function(t,e,n){var r,o=i.getHashByState(t);return r={discardedState:t,backState:n,forwardState:e},i.discardedStates[o]=r,!0},i.discardHash=function(t,e,n){var r={discardedHash:t,backState:n,forwardState:e};return i.discardedHashes[t]=r,!0},i.discardedState=function(t){var e,n=i.getHashByState(t);return e=i.discardedStates[n]||!1},i.discardedHash=function(t){var e=i.discardedHashes[t]||!1;return e},i.recycleState=function(t){var e=i.getHashByState(t);return i.discardedState(t)&&delete i.discardedStates[e],!0},i.emulated.hashChange&&(i.hashChangeInit=function(){i.checkerFunction=null;var n,r,a,s,u="",c=Boolean(i.getHash());return i.isInternetExplorer()?(n="historyjs-iframe",r=e.createElement("iframe"),r.setAttribute("id",n),r.setAttribute("src","#"),r.style.display="none",e.body.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.close(),a="",s=!1,i.checkerFunction=function(){if(s)return!1;s=!0;var e=i.getHash(),n=i.getHash(r.contentWindow.document);return e!==u?(u=e,n!==e&&(a=n=e,r.contentWindow.document.open(),r.contentWindow.document.close(),r.contentWindow.document.location.hash=i.escapeHash(e)),i.Adapter.trigger(t,"hashchange")):n!==a&&(a=n,c&&""===n?i.back():i.setHash(n,!1)),s=!1,!0}):i.checkerFunction=function(){var e=i.getHash()||"";return e!==u&&(u=e,i.Adapter.trigger(t,"hashchange")),!0},i.intervalList.push(o(i.checkerFunction,i.options.hashChangeInterval)),!0},i.Adapter.onDomLoad(i.hashChangeInit)),i.emulated.pushState&&(i.onHashChange=function(e){var n,r=e&&e.newURL||i.getLocationHref(),o=i.getHashByUrl(r),a=null,s=null;return i.isLastHash(o)?(i.busy(!1),!1):(i.doubleCheckComplete(),i.saveHash(o),o&&i.isTraditionalAnchor(o)?(i.Adapter.trigger(t,"anchorchange"),i.busy(!1),!1):(a=i.extractState(i.getFullUrl(o||i.getLocationHref()),!0),i.isLastSavedState(a)?(i.busy(!1),!1):(s=i.getHashByState(a),(n=i.discardedState(a))?(i.getHashByIndex(-2)===i.getHashByState(n.forwardState)?i.back(!1):i.forward(!1),!1):(i.pushState(a.data,a.title,encodeURI(a.url),!1),!0))))},i.Adapter.bind(t,"hashchange",i.onHashChange),i.pushState=function(e,n,r,o){if(r=encodeURI(r).replace(/%25/g,"%"),i.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:o}),!1;i.busy(!0);var a=i.createStateObject(e,n,r),s=i.getHashByState(a),u=i.getState(!1),c=i.getHashByState(u),l=i.getHash(),f=i.expectedStateId==a.id;return i.storeState(a),i.expectedStateId=a.id,i.recycleState(a),i.setTitle(a),s===c?(i.busy(!1),!1):(i.saveState(a),f||i.Adapter.trigger(t,"statechange"),i.isHashEqual(s,l)||i.isHashEqual(s,i.getShortUrl(i.getLocationHref()))||i.setHash(s,!1),i.busy(!1),!0)},i.replaceState=function(e,n,r,o){if(r=encodeURI(r).replace(/%25/g,"%"),i.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:o}),!1;i.busy(!0);var a=i.createStateObject(e,n,r),s=i.getHashByState(a),u=i.getState(!1),c=i.getHashByState(u),l=i.getStateByIndex(-2);return i.discardState(u,a,l),s===c?(i.storeState(a),i.expectedStateId=a.id,i.recycleState(a),i.setTitle(a),i.saveState(a),i.Adapter.trigger(t,"statechange"),i.busy(!1)):i.pushState(a.data,a.title,a.url,!1),!0}),void(i.emulated.pushState&&i.getHash()&&!i.emulated.hashChange&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(t,"hashchange")})))},"undefined"!=typeof i.init&&i.init()}(window),function(t,e){"use strict";var n=t.console||e,r=t.document,o=t.navigator,i=t.sessionStorage||!1,a=t.setTimeout,s=t.clearTimeout,u=t.setInterval,c=t.clearInterval,l=t.JSON,f=t.alert,p=t.History=t.History||{},d=t.history;try{i.setItem("TEST","1"),i.removeItem("TEST")}catch(h){i=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(){return"undefined"==typeof p.Adapter?!1:("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||r.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)c(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,e,o,i,a,s=!("undefined"==typeof n||"undefined"==typeof n.log||"undefined"==typeof n.log.apply),u=r.getElementById("log");for(s?(i=Array.prototype.slice.call(arguments),t=i.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[t,i]):n.log.apply(n,[t,i])):t="\n"+arguments[0]+"\n",e=1,o=arguments.length;o>e;++e){if(a=arguments[e],"object"==typeof a&&"undefined"!=typeof l)try{a=l.stringify(a)}catch(c){}t+="\n"+a+"\n"}return u?(u.value+=t+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):s||f(t),!0},p.getInternetExplorerMajorVersion=function(){var t=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=r.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return t>4?t:!1}();return t},p.isInternetExplorer=function(){var t=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return t},p.emulated=p.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent))),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in r)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,n;return t?(e=l.stringify(t),n=l.parse(e)):n={},n},p.getRootUrl=function(){var t=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(t+=":"+r.location.port),t+="/"},p.getBaseHref=function(){var t=r.getElementsByTagName("base"),e=null,n="";return 1===t.length&&(e=t[0],n=e.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var t=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return t},p.getPageUrl=function(){var t,e=p.getState(!1,!1),n=(e||{}).url||p.getLocationHref();return t=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){var t=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},p.getFullUrl=function(t,e){var n=t,r=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(n="/"===r?p.getRootUrl()+t.replace(/^\/+/,""):"#"===r?p.getPageUrl().replace(/#.*/,"")+t:"?"===r?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,n=p.getBaseUrl(),r=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(r,"/"),p.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return t=t||r,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var n=p.getLastSavedState();return!n&&e&&(n=p.createStateObject()),t&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(t){var e,n=p.extractId(t.url);if(!n)if(e=p.getStateString(t),"undefined"!=typeof p.stateToId[e])n=p.stateToId[e];else if("undefined"!=typeof p.store.stateToId[e])n=p.store.stateToId[e];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof p.idToState[n]&&"undefined"==typeof p.store.idToState[n])break;p.stateToId[e]=n,p.idToState[n]=t}return n},p.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!p.isEmptyObject(e.data),(e.title||n)&&p.options.disableSuid!==!0&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},p.createStateObject=function(t,e,n){var r={data:t,title:e,url:n};return r=p.normalizeState(r)},p.getStateById=function(t){t=String(t);var n=p.idToState[t]||p.store.idToState[t]||e;return n},p.getStateString=function(t){var e,n,r;return e=p.normalizeState(t),n={data:e.data,title:t.title,url:t.url},r=l.stringify(n)},p.getStateId=function(t){var e,n;return e=p.normalizeState(t),n=e.id},p.getHashByState=function(t){var e,n;return e=p.normalizeState(t),n=e.hash},p.extractId=function(t){var e,n,r,o;return o=-1!=t.indexOf("#")?t.split("#")[0]:t,n=/(.*)\&_suid=([0-9]+)$/.exec(o),r=n?n[1]||t:t,e=n?String(n[2]||""):"",e||!1},p.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},p.extractState=function(t,e){var n,r,o=null;return e=e||!1,n=p.extractId(t),n&&(o=p.getStateById(n)),o||(r=p.getFullUrl(t),n=p.getIdByUrl(r)||!1,n&&(o=p.getStateById(n)),o||!e||p.isTraditionalAnchor(t)||(o=p.createStateObject(null,null,r))),o},p.getIdByUrl=function(t){var n=p.urlToId[t]||p.store.urlToId[t]||e;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||e},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||e},p.hasUrlDuplicate=function(t){var e,n=!1;return e=p.extractState(t.url),n=e&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e,n,r,o=!1;return p.savedStates.length&&(e=t.id,n=p.getLastSavedState(),r=n.id,o=e===r),o},p.saveState=function(t){return p.isLastSavedState(t)?!1:(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?p.savedStates[p.savedStates.length-1]:0>t?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){var t=null;return t=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e,n=p.getLocationHref(t);return e=p.getHashByUrl(n)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},p.setHash=function(t,e){var n,o;return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),n=p.extractState(t,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==t&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+t,!1)):r.location.hash=t),p)},p.escapeHash=function(e){var n=p.normalizeHash(e);return n=t.encodeURIComponent(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,n=t.title;n||(e=p.getStateByIndex(0),e&&e.url===t.url&&(n=e.title||p.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(o){}return r.title=n,p},p.queues=[],p.busy=function(t){if("undefined"!=typeof t?p.busy.flag=t:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var e=function(){var t,n,r;if(!p.busy.flag)for(t=p.queues.length-1;t>=0;--t)n=p.queues[t],0!==n.length&&(r=n.shift(),p.fireQueueItem(r),p.busy.timeout=a(e,p.options.busyDelay))};p.busy.timeout=a(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=a(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var e,n=p.extractState(p.getLocationHref());if(!p.isLastSavedState(n))return e=n,e||(e=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p
},p.back=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),d.go(-1),!0)},p.forward=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),d.go(1),!0)},p.go=function(t,e){var n;if(t>0)for(n=1;t>=n;++n)p.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)p.back(e)}return p},p.emulated.pushState){var h=function(){};p.pushState=p.pushState||h,p.replaceState=p.replaceState||h}else p.onPopState=function(e,n){var r,o,i=!1,a=!1;return p.doubleCheckComplete(),(r=p.getHash())?(o=p.extractState(r||p.getLocationHref(),!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(i=p.Adapter.extractEventData("state",e,n)||!1,a=i?p.getStateById(i):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),a||(a=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(a)?(p.busy(!1),!1):(p.storeState(a),p.saveState(a),p.setTitle(a),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(e,n,r,o){if(p.getHashByUrl(r)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:o}),!1;p.busy(!0);var i=p.createStateObject(e,n,r);return p.isLastSavedState(i)?p.busy(!1):(p.storeState(i),p.expectedStateId=i.id,d.pushState(i.id,i.title,i.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(e,n,r,o){if(p.getHashByUrl(r)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:o}),!1;p.busy(!0);var i=p.createStateObject(e,n,r);return p.isLastSavedState(i)?p.busy(!1):(p.storeState(i),p.expectedStateId=i.id,d.replaceState(i.id,i.title,i.url),p.Adapter.trigger(t,"popstate")),!0};if(i){try{p.store=l.parse(i.getItem("History.store"))||{}}catch(g){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),i&&(p.onUnload=function(){var t,e,n;try{t=l.parse(i.getItem("History.store"))||{}}catch(r){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState)p.idToState.hasOwnProperty(e)&&(t.idToState[e]=p.idToState[e]);for(e in p.urlToId)p.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=p.urlToId[e]);for(e in p.stateToId)p.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=p.stateToId[e]);p.store=t,p.normalizeStore(),n=l.stringify(t);try{i.setItem("History.store",n)}catch(o){if(o.code!==DOMException.QUOTA_EXCEEDED_ERR)throw o;i.length&&(i.removeItem("History.store"),i.setItem("History.store",n))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===o.vendor||"Mozilla"===(o.appCodeName||""))&&(p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})))},p.options&&p.options.delayInit||p.init()}(window)}.call(root,windowObject),function(){(function(t){"use strict";function e(t,e){var n,i,a=t.parentNode;if(a||o||(a=document.createDocumentFragment(),a.appendChild(t)),r)return r.call(t,e);for(n=a.querySelectorAll(e),i=n.length;i--;)if(n[i]===t)return!0;return!1}var n=Element.prototype,r=n.matches||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector,o=function(){return r?r.call(document.createElement("a"),"a"):!1}();"object"==typeof exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.matches=e})(this)}.call(root),function(){(function(t){function e(t){function e(t){if(!r(t))throw new Error("delegate(): The argument must be an Element or Document Node");return o=t,e}function n(e,n,r){for(;n&&n!==e;){if(t(n,r))return n;n=n.parentElement}return null}function r(t){return t&&t.nodeName&&(3===t.nodeType||9===t.nodeType)?!0:!1}var o;return e.on=function(t,r,i,a,s){function u(a){(a.delegateTarget=n(o,a.target,r))&&(s===!0&&e(o).off(t,u),i.call(o,a))}return i._delegateWrapper=u,o.addEventListener(t,u,a||!1),i},e.once=function(t,n,r,o){e.on(t,n,r,o,!0)},e.off=function(t,e,n){e._delegateWrapper&&(e=e._delegateWrapper),o.removeEventListener(t,e,n||!1)},e}"object"==typeof exports?module.exports=e(require("matches")):"function"==typeof define&&define.amd?define(["matches"],e):t.delegate=e(t.matches)})(this)}.call(root),function(){(function(t){var e;"object"==typeof exports?(e=require("q"),module.exports=t(e)):"function"==typeof define&&define.amd?define(["q"],t):(e=window.Q,window.Qajax=t(e))})(function(t){"use strict";function e(t,e){return t in e?e[t]:a.defaults[t]}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}function o(t){return-1===t.indexOf("?")}function i(t){a.defaults.logs&&window.console&&console.log(t)}var a=function(){var a,u=arguments;if(!u.length)throw new Error("Qajax: settings are required");if("string"==typeof u[0])a="object"==typeof u[1]&&u[1]||{},a.url=u[0];else{if("object"!=typeof u[0])throw new Error("Qajax: settings must be an object");a=u[0]}if(!a.url)throw new Error("Qajax: settings.url is required");if("cancellation"in a&&!t.isPromiseAlike(a.cancellation))throw new Error("cancellation must be a Promise.");var c=new XMLHttpRequest,l=a.cancellation||t.defer().promise,f=e("method",a),p=e("base",a),d=a.url,h=a.data,g=a.params||{},y=t.defer(),m=e("timeout",a),v=n({},e("headers",a)),b=e("cache",a);b&&(g[b===!0?"_":b]=(new Date).getTime()),p&&(d=p+d);var S=r(g);return S&&(d=d+(o(d)?"?":"&")+S),null!==h&&"object"==typeof h&&(s in v||(v[s]="application/json"),h=JSON.stringify(h)),t.fcall(function(){c.onreadystatechange=function(){if(4===c.readyState)try{i(f+" "+d+" => "+c.status),c.status?y.resolve(c):y.reject(c)}catch(t){y.reject(c)}},c.onprogress=function(t){y.notify(t)},c.open(f,d,!0);for(var t in v)v.hasOwnProperty(t)&&c.setRequestHeader(t,v[t]);return void 0!==h&&null!==h?c.send(h):c.send(),l.fin(function(){y.promise.isFulfilled()||(i("Qajax cancellation reached."),c.abort())}),m?y.promise.timeout(m).fail(function(t){throw t instanceof Error&&(i("Qajax request delay reach in "+f+" "+d),c.abort()),c}):y.promise})};a.TIMEOUT=void 0,a.defaults={logs:!1,timeout:6e4,cache:window.ActiveXObject||"ActiveXObject"in window,method:"GET",headers:{},base:""},a.filterStatus=function(e){var n,r;if(r=typeof e,"function"===r)n=e;else{if("number"!==r)throw"validStatus type "+r+" unsupported";n=function(t){return t===e}}return function(e){var r=0;try{r=e.status}catch(o){i("Qajax: failed to read xhr.status")}return 1223===r&&(r=204),n(r)?t.resolve(e):t.reject(e)}},a.filterSuccess=a.filterStatus(function(t){return t>=200&&300>t||304===t}),a.toJSON=function(e){return t.fcall(function(){return JSON.parse(e.responseText)})},a.getJSON=function(t){return a({url:t,method:"GET"}).then(a.filterSuccess).then(a.toJSON)},a.serialize=r;var s="Content-Type";return a})}.call(root),function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function t(t){return function(){return Y.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===re(t)||t instanceof J}function r(t,e){if(P&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ie)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ie+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];s(o)||i(o)||!o||n.push(o)}return n.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function s(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===z&&r>=$&&le>=r}function u(){if(P)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=a(n);if(!r)return;return z=r[0],r[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return m(t)?t:v(t)?A(t):C(t)}function f(){function t(t){e=t,i.source=t,K(n,function(e,n){V(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=te(f.prototype),i=te(h.prototype);if(i.promiseDispatch=function(t,o,i){var a=X(arguments);n?(n.push(a),"when"===o&&i[1]&&r.push(i[1])):V(function(){e.promiseDispatch.apply(e,a)})},i.valueOf=c(function(){if(n)return i;var t=y(e);return m(t)&&(e=t),t},"valueOf","inspect"),i.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(a){i.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){e||t(l(n))},o.fulfill=function(n){e||t(C(n))},o.reject=function(n){e||t(H(n))},o.notify=function(t){e||K(r,function(e,n){V(function(){n(t)})},void 0)},o}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function d(t){return p(function(e,n){for(var r=0,o=t.length;o>r;r++)l(t[r]).then(e,n)})}function h(t,e,n){void 0===e&&(e=function(t){return H(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=te(h.prototype);if(r.promiseDispatch=function(n,o,i){var a;try{a=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(s){a=H(s)}n&&n(a)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=c(function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value})}return r}function g(t,e,n,r){return l(t).then(e,n,r)}function y(t){if(m(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function m(t){return e(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function v(t){return e(t)&&"function"==typeof t.then}function b(t){return m(t)&&"pending"===t.inspect().state}function S(t){return!m(t)||"fulfilled"===t.inspect().state}function w(t){return m(t)&&"rejected"===t.inspect().state}function x(){ue||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",ae),ue=!0}function j(){for(var t=0;t<ae.length;t++){var e=ae[t];console.warn("Unhandled rejection reason:",e)}}function k(){ae.length=0,se.length=0,ue=!1,ce||(ce=!0,"undefined"!=typeof process&&process.on&&process.on("exit",j))}function I(t,e){ce&&(se.push(t),ae.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e),x())}function T(t){if(ce){var e=G(se,t);-1!==e&&(se.splice(e,1),ae.splice(e,1))}}function H(t){var e=h({when:function(e){return e&&T(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return I(e,t),e}function C(t){return h({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return ne(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function A(t){var e=f();return V(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function E(t){return h({isDef:function(){}},function(e,n){return R(t,e,n)},function(){return l(t).inspect()})}function _(t,e,n){return l(t).spread(e,n)}function O(t){return function(){function e(t,e){var a;if(oe){try{a=r[t](e)}catch(s){return H(s)}return a.done?a.value:g(a.value,o,i)}try{a=r[t](e)}catch(s){return n(s)?s.value:H(s)}return g(a,o,i)}var r=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}}function N(t){l.done(l.async(t)())}function U(t){throw new J(t)}function L(t){return function(){return _([this,B(arguments)],function(e,n){return t.apply(e,n)})}}function R(t,e,n){return l(t).dispatch(e,n)}function B(t){return g(t,function(t){var e=0,n=f();return K(t,function(r,o,i){var a;m(o)&&"fulfilled"===(a=o.inspect()).state?t[i]=a.value:(++e,g(o,function(r){t[i]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function D(t){return g(t,function(t){return t=Z(t,l),g(B(Z(t,function(t){return g(t,W,W)})),function(){return t})})}function M(t){return l(t).allSettled()}function F(t,e){return l(t).then(void 0,void 0,e)}function q(t,e){return l(t).nodeify(e)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var z,J,$=u(),W=function(){},V=function(){function t(){for(;e.next;){e=e.next;var n=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{n()}catch(a){if(i)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),a;setTimeout(function(){throw a},0)}o&&o.exit()}r=!1}var e={task:void 0,next:null},n=e,r=!1,o=void 0,i=!1;if(V=function(t){n=n.next={task:t,domain:i&&process.domain,next:null},r||(r=!0,o())},"undefined"!=typeof process&&process.nextTick)i=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=s,a.port1.onmessage=t,t()};var s=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),s()}}else o=function(){setTimeout(t,0)};return V}(),Y=Function.call,X=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),G=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,r=[];return K(n,function(o,i,a){r.push(t.call(e,i,a,n))},void 0),r}),te=Object.create||function(t){function e(){}return e.prototype=t,new e},ee=t(Object.prototype.hasOwnProperty),ne=Object.keys||function(t){var e=[];for(var n in t)ee(t,n)&&e.push(n);return e},re=t(Object.prototype.toString);J="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var oe;try{new Function("(function* (){ yield 1; })"),oe=!0}catch(Q){oe=!1}var ie="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,l.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?X(arguments,1):n)}},l.promise=p,l.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},h.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=d,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(n){return H(n)}}function i(t){if("function"==typeof e){r(t,s);try{return e(t)}catch(n){return H(n)}}return H(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,u=f(),c=!1;return V(function(){s.promiseDispatch(function(t){c||(c=!0,u.resolve(o(t)))},"when",[function(t){c||(c=!0,u.resolve(i(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||u.notify(e)}]),u.promise},l.when=g,h.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=y,l.isPromise=m,l.isPromiseAlike=v,l.isPending=b,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=S,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ae=[],se=[],ue=!1,ce=!0;l.resetUnhandledRejections=k,l.getUnhandledReasons=function(){return ae.slice()},l.stopUnhandledRejectionTracking=function(){k(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",j),ce=!1},k(),l.reject=H,l.fulfill=C,l.master=E,l.spread=_,h.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=O,l.spawn=N,l["return"]=U,l.promised=L,l.dispatch=R,h.prototype.dispatch=function(t,e){var n=this,r=f();return V(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},h.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},h.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},h.prototype.del=h.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},h.prototype.mapply=h.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,X(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,X(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(t){var e=l(t),n=X(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(X(arguments))])}},h.prototype.fbind=function(){var t=this,e=X(arguments);return function(){return t.dispatch("apply",[this,e.concat(X(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=B,h.prototype.all=function(){return B(this)},l.allResolved=c(D,"allResolved","allSettled"),h.prototype.allResolved=function(){return D(this)},l.allSettled=M,h.prototype.allSettled=function(){return this.then(function(t){return B(Z(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},h.prototype.fail=h.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=F,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},h.prototype.fin=h.prototype["finally"]=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},h.prototype.done=function(t,e,n){var o=function(t){V(function(){if(r(t,i),!l.onerror)throw t;l.onerror(t)})},i=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},h.prototype.timeout=function(t,e){var n=f(),r=setTimeout(function(){n.reject(new Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},h.prototype.delay=function(t){return this.then(function(e){var n=f();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},h.prototype.nfapply=function(t){var e=f(),n=X(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=X(arguments,1);return l(t).nfapply(e)},h.prototype.nfcall=function(){var t=X(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=X(arguments,1);return function(){var n=e.concat(X(arguments)),r=f();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=X(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(X(arguments)),i=f();return o.push(i.makeNodeResolver()),l(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},h.prototype.nmapply=h.prototype.npost=function(t,e){var n=X(e||[]),r=f();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=X(arguments,2),r=f();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var e=X(arguments,1),n=f();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=q,h.prototype.nodeify=function(t){return t?void this.then(function(e){V(function(){t(null,e)})},function(e){V(function(){t(e)})}):this};var le=u();return l}),root.Q=Q;var embeddedDependencies=["Apollo","riveter","Conduit","postal","matches","delegate","Qajax"];return function(t,e,n,r,o,i,a){function s(t,e){return void 0===m[t]?m[t]=0:m[t]++,t+(e===!0&&m[t]>0?m[t]:"")}function u(){var t=e.has(History,"Adapter");return t===!1&&w.errorLog("History.js is not loaded."),t}function c(t){return t=e.isArray(t)?t:[t],e.where(t,{nav:!0})}function l(t){return c(t).length>0}function f(t){return"undefined"!=typeof t&&e.isFunction(t.notifySubscribers)}n._footworkVersion="0.2.0",n.embed=t,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var p=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)}catch(d){p=!0}n.debugLevel=n.observable(0),n.log=function(){if(n.debugLevel()>2)try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var t=0;t<arguments.length;)console.log("Item "+(t+1)+": "+arguments[t]),t++;else 1==slice.call(arguments).length&&"string"==typeof slice.call(arguments)[0]?console.log(slice.call(arguments).toString()):console.log.apply(console,slice.call(arguments));else Function.prototype.bind&&!p||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,slice.call(arguments))}catch(e){}},n.logError=function(t,e){if(n.debugLevel()>1){var r;r=t instanceof Error?t:new Error(t),r.innerError=e;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(r):Function.prototype.bind&&!p||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,r)}catch(o){}throw r}};var h=n.applyBindings;n.applyBindings=function(t,e){h(t,e),"undefined"!=typeof t&&"function"==typeof t.startup&&"undefined"!=typeof t._options&&(t._options.startup!==!1&&t.startup(),"function"==typeof t._modelOptions.afterBinding&&t._modelOptions.afterBinding.call(t))},n.__nsStack=[],n.namespace=function(t){return r.channel(t)},n.currentNamespaceName=function(){return n.__nsStack[0]},n.currentNamespace=function(){return n.namespace(n.currentNamespaceName())},n.enterNamespaceName=function(t){n.__nsStack.unshift(t)},n.exitNamespace=function(){n.__nsStack.shift()},n.modelCount=function(){var t=e.reduce(m,function(t,e,n){return t[n]=e+1,t},{});return t.__total=e.reduce(e.values(t),function(t,e){return t+e},0),t},n.getModels=function(t){return void 0===t?y:y[t]};var g=!1;n.debugModels=function(t){g=t},n.refreshModels=function(){e.invoke(n.getModels(),"refreshReceived")};var y={},m={};n.model=function(t){t=e.extend({namespace:void 0,autoIncrement:!1,mixins:void 0,params:void 0,afterBinding:function(){},constructor:function(){},componentNamespace:void 0},t);var r={_preInit:function(){t.namespace=s(t.componentNamespace||t.namespace||e.uniqueId("namespace"),t.autoIncrement),this._modelOptions=t,n.enterNamespaceName(t.namespace),this.namespace=n.currentNamespace(),this._globalNamespace=n.namespace()},mixin:{getNamespaceName:function(){return this.namespace.channel},getModelOptions:function(){return t},broadcastAll:function(){var t=this;return e.each(this,function(n,r){e.isObject(n)&&n.__isBroadcast===!0&&t.namespace.publish(r,n())}),this},refreshReceived:function(){return e.each(this,function(t){e.isObject(t)&&t.__isReceived===!0&&t.refresh()}),this},startup:function(){return this.refreshReceived().broadcastAll(),this}},_postInit:function(){g===!0&&(y[this.getNamespaceName()]=this),n.exitNamespace(),this.startup(),e.isFunction(t.afterCreating)&&t.afterCreating.call(this)}},o=[t.constructor,r];void 0!==t.mixins&&(o=o.concat(t.mixins));var a=i.compose.apply(void 0,o);return a._isFootworkModel=!0,a.options=t,a},n.component=function(t){if("string"!=typeof t.name)throw"Components must be provided a name (namespace).";if("string"!=typeof t.template)throw"Components must be provided a template.";t.namespace=t.name=e.result(t,"name");var r=t.constructor._isFootworkModel===!0?t.constructor:this.model(t);r.options.componentNamespace=t.namespace,n.components.register(t.name,{viewModel:r,template:t.template})},n.subscribable.fn.receiveFrom=function(t,o){var i,a=this,s=this;if(e.isObject(t)===!0&&void 0!==t.channel)i=t;else{if("string"!=typeof t)throw"Invalid namespace ["+typeof t+"]";i=r.channel(t)}return s=n.computed({read:a,write:function(t){i.publish("change."+o,t)}}),s.refresh=function(){i.publish("refresh."+o)},i.subscribe(o,function(t){a(t)}),s.__isReceived=!0,s},n.subscribable.fn.broadcastAs=function(t,r){var o,i=this;return r=e.isObject(t)===!0?t:"boolean"==typeof r?{name:t,writable:r}:e.isObject(r)===!0?e.extend({name:t},r):{name:t},o=r.namespace||n.currentNamespace(),r.writable&&o.subscribe("change."+r.name,function(t){i(t)}),o.subscribe("refresh."+r.name,function(){o.publish(r.name,i())}),i.subscribe(function(t){o.publish(r.name,t)}),i.__isBroadcast=!0,i},n.bindingHandlers.registerElement={preprocess:function(t){return"'"+t+"'"},init:function(t,r,o,i){var a=n.unwrap(r()),s={name:t.getAttribute("id")||t.getAttribute("name"),context:"relative"};"string"==typeof a?a=e.extend(s,{name:a}):"object"==typeof a&&(a=e.extend(s,a)),"object"!=typeof i.el&&(i.el={}),i.el[a.name]=t}},n.bindingHandlers["class"]={update:function(t,e){t.__ko__previousClassValue__&&o.removeClass(t,t.__ko__previousClassValue__);var r=n.utils.unwrapObservable(e());void 0!==r&&o.addClass(t,r),t.__ko__previousClassValue__=r}},n.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},n.extenders.throttle=function(t,e){"number"==typeof e&&(e={timeout:e,when:function(){return!0}}),t.throttleEvaluation=e.timeout;var r=null,o=n.dependentObservable({read:t,write:function(n){e.when(n)?(clearTimeout(r),r=setTimeout(function(){t(n)},e.timeout)):(clearTimeout(r),t(n))}});return o.force=function(e){clearTimeout(r),t(e)},o},n.extenders.autoDisable=function(t,e){return t.extend({delayTrigger:{delay:e||0,trigger:function(t){t(!1)}}})},n.extenders.autoEnable=function(t,e){return t.extend({delayTrigger:{delay:e||0,trigger:function(t){t(!0)}}})},n.extenders.delayTrigger=function(t,e){var r,o=300,i=function(){};"object"==typeof e?(o=!isNaN(e.delay)&&parseInt(e.delay,10)||o,i=e.trigger||i):o=!isNaN(e)&&parseInt(e,10)||o;var a=function(){clearTimeout(r),r=void 0},s=n.computed({read:t,write:function(n){t(n),void 0!==r&&a(),r=setTimeout(function(){i(t,e)}.bind(t),s.triggerDelay)}});return s.clearTrigger=a,s.triggerDelay=o,s},n.extenders.delayWrite=function(t,e){var r,o=300;return"object"==typeof e?(o=!isNaN(e.delay)&&parseInt(e.delay,10)||o,r=e.filter||function(){return!0}):o=!isNaN(e)&&parseInt(e,10)||o,n.computed({read:t,write:function(e){r(e)?(t._delayWriteTimer&&clearTimeout(this._delayWriteTimer),t._delayWriteTimer=setTimeout(function(){t(e)},o)):t(e)}})};var v,b,S=[],w=n.router=function(t){var n=this.router;return n.config=t=e.extend({activate:!0,routes:[]},n.config,t),n.setRoutes(),t.activate?n.activate():n};w.config={},w.namespace=n.namespace("router"),w.setRoutes=function(t){return S=[],w.addRoutes(t||this.config.routes),w},w.addRoutes=function(t){return t=e.isArray(t)?t:[t],S.push.apply(S,t),l(t)&&f(v)&&j.notifySubscribers(),w};var x,j=n.observable();return w.navigationModel=function(t){return x=t||x||function(){return!0},"undefined"==typeof v&&(v=n.computed(function(){return this.navModelUpdate(),e.filter(c(S),x)},{navModelUpdate:j})),v},w.stateChanged=function(t){t=t||(b?History.getState().url:"#default"),this.namespace.publish("stateChanged",t);this.getRouteFor(t);return w},w.getRouteFor=function(){e.each(w.getRoutes(),function(t){console.log(t)})},w.getRoutes=function(){return S},w.setupHistoryAdapter=function(){return b!==!0&&(b=!1,u()&&(History.Adapter.bind(window,"statechange",w.stateChanged),b=!0)),b},w.historyIsEnabled=function(){return b},w.activate=e.once(e.bind(function(){return w.setupHistoryAdapter(),a(document).on("click","a",function(t){console.info("delegateClick-event",t.delegateTarget)}),a(document).on("click",".footwork-link-target",function(t){console.info("delegateClick-event",t.delegateTarget)}),w.stateChanged()},w)),n}(root._.pick(root,embeddedDependencies),root._,root.ko,root.postal,root.Apollo,root.riveter,root.delegate,root.Q,root.Qajax)}()});