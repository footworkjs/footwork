define(["knockout-footwork","lodash"],function(e,t){return{_preInit:function(n){var r,i=e.namespace("PaneElements");this.visible=e.observable(null).extend({autoEnable:t.random(200,600)}),this.active=e.observable(!1),this.clickable=e.observable(!1),this.viewportIsMobile=e.observable().receiveFrom("ViewPort","isMobile"),this.viewportIsTablet=e.observable().receiveFrom("ViewPort","isTablet"),this.paneScrolling=e.observable(!1).receiveFrom("Pane","scrolling"),this.state=e.computed(function(){return{visible:this.visible(),active:this.active()}},this),this.active.subscribe(function(e){e===!0?(clearTimeout(r),r=setTimeout(function(){this.clickable(!0)}.bind(this),300)):this.clickable(!1)},this),this.namespace.subscribe("deactivate",function(e){e!==this&&this.paneScrolling()===!1&&this.active(!1)}).withContext(this),i.subscribe("hideAll",function(){this.visible(!1)}).withContext(this),this.filterClick=function(e,n){var r=$(n.target),i=[this.viewportIsTablet(),this.viewportIsMobile()];r.prop("tagName")!=="A"&&(r=r.parents("a")),(t.any(i)&&this.clickable()===!0||t.contains(i,!0)===!1)&&window.open(r.prop("href"),"_blank")},this.activate=function(){this.paneScrolling()===!1&&(this.active(!0),this.namespace.publish("deactivate",this))},this.visible(!1)}}});