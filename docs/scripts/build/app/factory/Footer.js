define(["knockout-footwork","lodash"],function(e,t){return e.model({namespace:"Footer",factory:function(){this.viewPortDim=e.observable().receiveFrom("ViewPort","dimensions"),this.bottomScrollPosition=e.observable().receiveFrom("ViewPort","bottomScrollPosition"),this.headerClosed=e.observable().receiveFrom("Header","closed"),this.columnWidth=e.observable(0).receiveFrom("Pane","columnWidth"),this.bodyHeight=e.observable(0).receiveFrom("Body","height"),this.viewPortIsMobile=e.observable().receiveFrom("ViewPort","isMobile"),this.viewPortLayoutMode=e.observable().receiveFrom("ViewPort","layoutMode"),this.viewPortNoTransitions=e.observable().receiveFrom("ViewPort","noTransitions"),this.paneCollapsed=e.observable().receiveFrom("Configuration","paneCollapsed"),this.paneShouldBeCollapsed=e.observable(!1).receiveFrom("Pane","shouldBeCollapsed"),this.paneDefaultSelection=e.observable().receiveFrom("PaneLinks","defaultSelection"),this.paneCurrentSelection=e.observable().receiveFrom("PaneLinks","currentSelection"),this.height=e.observable(70).broadcastAs("height"),this.visibleHeight=e.computed(function(){var e=this.viewPortDim(),t=this.bodyHeight(),n=this.bottomScrollPosition();return e!==undefined&&n!==undefined&&n>=t-this.height()?n-(t-this.height()):0},this).broadcastAs("visibleHeight"),this.setMode=function(e,t){this.viewPortNoTransitions(!0);var n=t.target.getAttribute("data-mode");n==="mobile"?(this.paneCurrentSelection("MainMenu"),this.viewPortIsMobile(!0),this.paneCollapsed(!0)):(this.viewPortLayoutMode()==="mobile"&&(this.paneCurrentSelection()==="MainMenu"||this.paneCurrentSelection()===undefined)&&this.paneCurrentSelection("PageSections"),this.paneCollapsed(this.paneShouldBeCollapsed()),this.viewPortIsMobile(!1),this.headerClosed(!1)),this._modeChanging&&clearTimeout(this._modeChanging),this._modeChanging=setTimeout(function(){this.viewPortNoTransitions(!1)}.bind(this),50)}}})});