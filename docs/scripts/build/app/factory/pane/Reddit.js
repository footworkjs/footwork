define(["jquery","lodash","knockout-footwork","paneArea","paneEntry"],function(e,t,n,r,i){var s=n.model({mixins:i,factory:function(t){var r=t.entryData;this.raw=n.observable(r.data),this.type=n.observable(r.type),this.entryTemplate=n.computed(function(){return"reddit-"+this.type()},this),this.entryIcon=n.computed(function(){return"icon-"+this.entryTemplate()},this),this.upvotes=n.observable(r.data.ups||0),this.downvotes=n.observable(r.data.downs||0),this.score=n.computed(function(){return this.raw().score||this.upvotes()-this.downvotes()},this),this.scoreIsNegative=n.computed(function(){return this.score()<0?!0:!1},this),this.offsetScore=n.computed(function(){return(this.scoreIsNegative()?"-":"+")+Math.abs(this.score())},this),this.numComments=n.computed(function(){return this.raw().num_comments||-1},this),this.subreddit=n.computed(function(){return"/r/"+this.raw().subreddit},this),this.subredditURL=n.computed(function(){return"http://reddit.com"+this.subreddit()},this),this.thumbnail=n.observable(r.data.thumbnail),this.relevantURL=n.observable(r.url),this.contextURL=n.computed(function(){var e="",t=this.raw();return t.permalink?e="http://reddit.com"+t.permalink:e="http://reddit.com"+this.subreddit()+"/comments/"+t.link_id+"/_/"+t.id,this.type()==="comment"&&(e+="?context=3"),e},this),this.postTitle=n.computed(function(){var e=this.raw();return e.link_title.toLowerCase()==="unknown title"?e.title:e.link_title},this),this.postHTML=n.computed(function(){var t=this.raw();return e("<div/>").html(t.body_html||t.selftext_html).text()},this)}});return n.model({namespace:"Reddit",mixins:r,params:{EntryFactory:s,url:"/json/redditAPI/page/"}})});