(function(){function e(e,t){return function(e,n){function f(e,n){return e===null?n==="null":e===t?n==="undefined":e.is&&e instanceof i?n==="element":Object.prototype.toString.call(e).toLowerCase().indexOf(n)>7}function d(e){var t,n,r,i,s,o,u,a,h;if(e instanceof d)return e;f(e,"array")||(e=String(e).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g));for(t=0,n=e.length;t<n;++t){f(e[t],"array")||(e[t]=String(e[t]).match(/(?:\+\/|[^\/])+/g)),o=[],r=e[t].length;while(r--){u=e[t][r],s={jwertyCombo:String(u),shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},f(u,"array")||(u=String(u).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)),i=u.length;while(i--)u[i]==="++"&&(u[i]="+"),u[i]in c.mods?s[l[c.mods[u[i]]]]=!0:u[i]in c.keys?s.keyCode=c.keys[u[i]]:a=u[i].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(f(s.keyCode,"undefined"))if(a&&a[1]in c.keys&&a[2]in c.keys){a[2]=c.keys[a[2]],a[1]=c.keys[a[1]];for(h=a[1];h<a[2];++h)o.push({altKey:s.altKey,shiftKey:s.shiftKey,metaKey:s.metaKey,ctrlKey:s.ctrlKey,keyCode:h,jwertyCombo:String(u)});s.keyCode=h}else s.keyCode=0;o.push(s)}this[t]=o}return this.length=t,this}var r=e.document,i=e.jQuery||e.Zepto||e.ender||r,s,o,u,a="keydown";i===r?(s=function(e,t){return e?i.querySelector(e,t||i):i},o=function(e,t){e.addEventListener(a,t,!1)},u=function(e,t){var n=r.createEvent("Event"),s;n.initEvent(a,!0,!0);for(s in t)n[s]=t[s];return(e||i).dispatchEvent(n)}):(s=function(e,t){return i(e||r,t)},o=function(e,t){i(e).bind(a+".jwerty",t)},u=function(e,t){i(e||r).trigger(i.Event(a,t))});var l={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},c={mods:{"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,"super":91,win:91},keys:{"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,"return":13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,del:46,"delete":46,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,"num-.":110,"num-period":110,"num-dot":110,"num-full-stop":110,"num-delete":110,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}},h=47,p=0;while(++h<106)c.keys[p]=h,c.keys["num-"+p]=h+48,++p;h=111,p=1;while(++h<136)c.keys["f"+p]=h,++p;h=64;while(++h<91)c.keys[String.fromCharCode(h).toLowerCase()]=h;var v=n.jwerty={event:function(e,t,n){if(f(t,"boolean")){var r=t;t=function(){return r}}e=new d(e);var i=0,s=e.length-1,o,u;return function(r){if(u=v.is(e,r,i)){if(i<s){++i;return}o=t.call(n||this,r,u),o===!1&&r.preventDefault(),i=0;return}i=v.is(e,r)?1:0}},is:function(e,t,n){e=new d(e),n=n||0,e=e[n],t=t.originalEvent||t;var r=e.length,i=!1;while(r--){i=e[r].jwertyCombo;for(var s in e[r])s!=="jwertyCombo"&&t[s]!=e[r][s]&&(i=!1);if(i!==!1)return i}return i},key:function(t,n,r,i,u){var a=f(r,"element")||f(r,"string")?r:i,l=a===r?e:r,c=a===r?i:u;o(f(a,"element")?a:s(a,c),v.event(t,n,l))},fire:function(e,t,n,r){e=new d(e);var i=f(n,"number")?n:r;u(f(t,"element")?t:s(t,n),e[i||0][0])},KEYS:c};return v}({jQuery:e,document:document},typeof module!="undefined"&&module.exports?module.exports:this)}typeof define=="function"&&define.amd?define(["jquery"],function(t){return e(t)}):typeof module!="undefined"&&module.exports?e(require("jquery")):e(jQuery||$)}).call(this);