<article>

  <a id="introduction" class="section-anchor"></a>
  <section name="introduction">
    <div class="highlight"></div>
    <header>
      <h1 class="sub title">fw.viewModel()</h1>
    </header>
    <div class="content block-font">
      <p>A viewModel can be thought of simply as a container object which your template/html binds to. There are a number of ways to create 
      them, but a simple plain old javascript object (POJO) at its most basic level is all that is needed.</p>
      <p>Footwork viewModel's are unique in that they help with many other aspects/concerns a developer might have such as 
      <a href="http://martinfowler.com/bliki/CQRS.html" target="_blank" title="Command Query Responsibility Segregation">CQRS</a>, lifecycle events, and more.</p>
    </div>
  </section>

  <a id="configuration" class="section-anchor"></a>
  <section name="configuration">
    <div class="highlight"></div>
    <header>
      <h2 class="sub title">Configuration</h2>
    </header>
    <div class="content block-font">
      <p>viewModel class functions can be created using the <span class="inline-code">fw.viewModel()</span> call and passing in a configuration object.</p>
<pre><code data-language="javascript">var Sprocket = fw.viewModel({ /* ... configuration object ... */ });
var awesomeSprocket = new Sprocket({ type: 'awesome', price: 3.50 });</code></pre>

      <p>Configuration object synopsis:</p>
<pre><code data-language="javascript">fw.viewModel({
  // The namespace (communications channel) the viewModel uses
  // It also prepended to the router namespace (if a router configuration is supplied)
  namespace: 'Sprocket',

  // If true, the namespace will have an auto-incremented 0-based index number appended for each new viewModel
  autoIncrement: false,

  // Initialization function called at creation of a new viewModel, is passed in parameters supplied at call
  initialize: function(params) {
    // this === the viewModel object
    // normal viewModel initialization, exactly as typical knockout.js code would have you do in a constructor function.
    this.type = fw.observable(params.type);
  },

  // Behavioral mixins to include with each new viewModel created, see the 'Mixins' section on this page
  mixins: [],

  // Router configuration object
  router: {
    // See: /api/routing
  },

  // Function called just after binding to the DOM
  afterBinding: function(containingElement) {
    // this === the viewModel object
  },

  // Function called just before the html this viewModel is bound to is removed from the DOM
  onDispose: function(containingElement) {
    // this === the viewModel object
  }
});</code></pre>
    </div>
  </section>

  <a id="initialization" class="section-anchor"></a>
  <section name="initialization">
    <div class="highlight"></div>
    <header>
      <h1 class="sub title">Initialization</h1>
    </header>
    <div class="content block-font">
      <p>A footwork viewModel can either be auto-created and bound by the framework based on a <span class="inline-code">&lt;viewModel module="moduleName"&gt;</span> declaration in
      your template/html, or manually via a <span class="inline-code">fw.viewModel()</span> class function.</p>

<pre><code data-language="javascript">/**
 * You use footwork viewModel class functions just like you would a normal knockout.js constructor function.
 * ie: var viewModelObject = new ConstructorFunc(paramaters ...);
 * Note: the parameters you pass into the ConstructorFunc(params) call get passed
 *       into the initialize(params) function from the configuration object.
 */
// example:
var Sprocket = fw.viewModel({
  // ... other options ...
  initialize: function() {
    this.type = fw.observable(params.type);
    this.price = fw.observable(params.price);
    this.isExpensive = fw.computed(function() {
      return this.price() > 10;
    }, this);
    this.color = 'orange';
  }
});
var awesomeSprocket = new Sprocket({ type: 'awesome', price: 3.50 });
// awesomeSprocket.price() === 3.50
// awesomeSprocket.isExpensive() === false
// awesomeSprocket.color === 'orange'

// Manually binding the viewModel to the DOM works exactly like it does in knockout.js
var sprocketElement = document.getElementById('sprocket-container');
fw.applyBindings(awesomeSprocket, sprocketElement);
// Now the awesomeSprocket viewModel is bound to the HTML just as it would be with normal knockout.js code.
</code></pre>
    </div>
  </section>

</article>

<div id="metaData">
{
  "title": "viewModel",
  "description": "viewModel declaration, instantiation, and binding.",
  "sections": [
    { "anchor": "introduction",
      "title": "fw.viewModel()",
      "subSections": [
        { "anchor": "configuration",
          "title": "Configuration" },
        { "anchor": "initialization",
          "title": "Initialization" }
      ] }
  ]
}
</div>