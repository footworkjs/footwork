<article>

  <a id="introduction" class="section-anchor"></a>
  <section name="introduction">
    <div class="highlight"></div>
    <header>
      <h1 class="sub title">fw.viewModel()</h1>
    </header>
    <div class="content">
      <p>A viewModel can be thought of simply as a container object which your template/HTML/DOM binds to. There are a number of ways to create 
      them, but a simple plain old javascript object (POJO) at its most basic level is all that is needed.</p>
      <p>Footwork viewModel's are unique in that they help with many other aspects/concerns a developer might have such as 
      <a href="http://martinfowler.com/bliki/CQRS.html" target="_blank" title="Command Query Responsibility Segregation">CQRS</a>, lifecycle events, and more.</p>
    </div>
  </section>

  <a id="configuration" class="section-anchor"></a>
  <section name="configuration">
    <div class="highlight"></div>
    <header>
      <h2 class="sub title">Configuration</h2>
    </header>
    <div class="content">
      <p>Class constructor functions are created by calling <span class="inline-code">fw.viewModel()</span> and passing it a configuration object.</p>
      <p>The result (returned constructor function) can then be used to instantiate new instances of that viewModel.</p>

      <h3>Configuration object synopsis:</h3>
<pre><code data-language="javascript">fw.viewModel({
  // The namespace (communications channel) the viewModel uses
  // It also prepended to the router namespace (if a router configuration is supplied)
  namespace: 'Sprocket',

  // If true, the namespace will have an auto-incremented 0-based index number appended for each new viewModel
  autoIncrement: false,

  // Initialization function called at creation of a new viewModel, is passed in parameters supplied at call
  initialize: function(params) {
    // this === the viewModel object
    // normal viewModel initialization, exactly as typical knockout.js code would have you do in a constructor function.
    this.type = fw.observable(params.type);
  },

  // Behavioral mixins to include with each new viewModel created
  mixins: [
    // See: 'Mixins' section on this page
  ],

  // Router configuration object
  router: {
    // See: /api/routing in documentation
  },

  // Function called just after binding to the DOM
  afterBinding: function(containingElement) {
    // this === the viewModel object
  },

  // Function called just before the html this viewModel is bound to is removed from the DOM
  onDispose: function(containingElement) {
    // this === the viewModel object
  }
});</code></pre>
    </div>
  </section>

  <a id="initialization" class="section-anchor"></a>
  <section name="initialization">
    <div class="highlight"></div>
    <header>
      <h2 class="sub title">Initialization</h2>
    </header>
    <div class="content">
      <p>In footwork a viewModel can be created/initialized and bound in 3 different ways:</p>
      <ul>
        <li>Manually initialized (or using a plain object) (standard knockout methodology).</li>
        <li>Automatically via a <span class="inline-code">&lt;viewModel module="moduleName"&gt;&lt;/viewModel&gt;</span> declaration in the DOM.</li>
        <li>Automatically via a <span class="inline-code">&lt;component-name&gt;&lt;/component-name&gt;</span> declaration in the DOM.</li>
      </ul>

<h3>Manual initialization (similar to what would be found in regular knockout.js code):</h3>
<pre><code data-language="javascript">/**
 * You use footwork viewModel class functions just like you would a normal knockout.js constructor function.
 * ie: var viewModelObject = new ConstructorFunc(paramaters ...);
 * Note: the parameters you pass into the ConstructorFunc(params) call get passed
 *       into the initialize(params) function from the configuration object.
 */
// example:
var Sprocket = fw.viewModel({
  // ... configuration object ...
  namespace: 'Sprocket',
  initialize: function(params) {
    this.type = fw.observable(params.type);
    this.color = 'orange';
    this.price = fw.observable(params.price);
    this.isExpensive = fw.computed(function() {
      return this.price() > 10;
    }, this);
  }
});

var awesomeSprocket = new Sprocket({ type: 'awesome', price: 3.50 });
// awesomeSprocket.type() === 'awesome'
// awesomeSprocket.color === 'orange'
// awesomeSprocket.isExpensive() === false
</code></pre>
    </div>
  </section>

</article>

<div id="metaData">
{
  "title": "viewModel",
  "description": "viewModel declaration, instantiation, and binding.",
  "sections": [
    { "anchor": "introduction",
      "title": "fw.viewModel()",
      "subSections": [
        { "anchor": "configuration",
          "title": "Configuration" },
        { "anchor": "initialization",
          "title": "Initialization" }
      ] }
  ]
}
</div>